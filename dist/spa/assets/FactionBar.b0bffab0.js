import{L as v,y,a as x,_ as z,g as w,h as _,i as f,j as a,p as t,q as o,Q as m,l as r,t as c,ae as p,N as g,ag as C,z as B}from"./index.4a7224fa.js";import{a as S}from"./QCheckbox.2bef0a7e.js";const D={components:{CloudinaryFormat:v},props:["zone"],data(){return{hordeStats:null,allianceStats:null,fetching:!1}},computed:{...y(["GetSettings","SelectedPeriode"]),hordeRuns(){if(!this.hordeStats)return;const{runs:e}=this.hordeStats;return Math.round(e/(e+this.allianceStats.runs)*100)+"%"},allianceRuns(){if(!this.allianceStats)return;const{runs:e}=this.allianceStats;return Math.round(e/(e+this.hordeStats.runs)*100)+"%"}},methods:{setData(e){this.hordeStats=e.find(({faction:i})=>i==="HORDE"),this.allianceStats=e.find(({faction:i})=>i==="ALLIANCE")},fetchData(){var n;var e=this;this.fetching=!0;var i=this.$store.state.data.apiUrl;const{min_keystonelevel:u,max_runs:h,limitbylowestdungeon:s}=this.GetSettings;x.get(i+"/Faction/leaderboard",{params:{periode:(n=this.SelectedPeriode)==null?void 0:n.id,min_level:u,amount:h,limitToLowestDungeon:s,zone:this.zone}}).then(l=>{e.fetching=!1,this.setData(l.data)}).catch(l=>{e.fetching=!1,console.log(l)})}},watch:{async SelectedPeriode(){this.fetchData()}},async mounted(){this.fetchData()}},k={key:0,class:"stats"},F={class:"absolute-full flex justify-start"},R={class:"infoContainer flex"},N={class:"textHolder greyBackground"},L={class:"absolute-full flex justify-end"},Q={class:"infoContainer flex"},b={class:"greyBackground textHolder"},j={key:1,class:"flex full-width justify-center"};function I(e,i,u,h,s,n){const l=w("CloudinaryFormat");return s.hordeStats&&s.allianceStats&&!s.fetching?(_(),f("div",k,[a("div",{style:g({width:n.allianceRuns})},[t(S,{size:"50px",value:100,class:"alliance q-mt-sm"},{default:o(()=>[a("div",F,[a("div",R,[t(l,{url:"factions/alliance.png"},{default:o(({link:d})=>[t(m,{"spinner-size":"10px",class:"factionIconSize","spinner-color":"white",src:d},null,8,["src"])]),_:1},8,["url"]),a("div",N,[r(c(n.allianceRuns)+" ",1),t(p,null,{default:o(()=>[r(c(s.allianceStats.runs),1)]),_:1})])])])]),_:1})],4),a("div",{style:g({width:n.hordeRuns})},[t(S,{size:"50px",value:100,class:"horde q-mt-sm"},{default:o(()=>[a("div",L,[a("div",Q,[a("div",b,[r(c(n.hordeRuns)+" ",1),t(p,null,{default:o(()=>[r(c(s.hordeStats.runs),1)]),_:1})]),t(l,{url:"factions/horde.png"},{default:o(({link:d})=>[t(m,{"spinner-size":"10px",class:"factionIconSize","spinner-color":"white",src:d},null,8,["src"])]),_:1},8,["url"])])])]),_:1})],4)])):s.fetching?(_(),f("div",j,[t(C,{size:"33px"})])):B("",!0)}var q=z(D,[["render",I]]);export{q as F};
