import{d as _e,u as Ee,B as Ie,r as A,c as G,K as xe,w as Pe,o as Re,h as C,n as V,q as T,p as m,j as P,L as ne,Q as re,l as j,t as R,i as E,M as oe,m as _,C as B,F as N,N as J,z as He,_ as Oe,O as ie,S as W}from"./index.4a7224fa.js";import{a as I,Q as se}from"./QTr.88cc62fd.js";import{Q as Ae}from"./QTable.e70e75fe.js";import{a as De}from"./index.0594d61d.js";import{k as Ue}from"./keystoneView.eeb5b98f.js";import{P as ae}from"./PlayerText.e02d8c11.js";var he=globalThis&&globalThis.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),L=function(o){he(t,o);function t(e,i){var s=this.constructor,n=this,a=s.prototype;return n=o.call(this,e)||this,n.statusCode=i,n.__proto__=a,n}return t}(Error),ge=function(o){he(t,o);function t(e){var i=this.constructor;e===void 0&&(e="A timeout occurred.");var s=this,n=i.prototype;return s=o.call(this,e)||this,s.__proto__=n,s}return t}(Error),f;(function(o){o[o.Trace=0]="Trace",o[o.Debug=1]="Debug",o[o.Information=2]="Information",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Critical=5]="Critical",o[o.None=6]="None"})(f||(f={}));var je=globalThis&&globalThis.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Q=globalThis&&globalThis.__assign||Object.assign||function(o){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(o[s]=t[s])}return o},Be=function(){function o(t,e,i){this.statusCode=t,this.statusText=e,this.content=i}return o}(),Ne=function(){function o(){}return o.prototype.get=function(t,e){return this.send(Q({},e,{method:"GET",url:t}))},o.prototype.post=function(t,e){return this.send(Q({},e,{method:"POST",url:t}))},o.prototype.delete=function(t,e){return this.send(Q({},e,{method:"DELETE",url:t}))},o}(),We=function(o){je(t,o);function t(e){var i=o.call(this)||this;return i.logger=e,i}return t.prototype.send=function(e){var i=this;return new Promise(function(s,n){var a=new XMLHttpRequest;a.open(e.method,e.url,!0),a.withCredentials=!0,a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.headers&&Object.keys(e.headers).forEach(function(u){return a.setRequestHeader(u,e.headers[u])}),e.responseType&&(a.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=function(){a.abort()}),e.timeout&&(a.timeout=e.timeout),a.onload=function(){e.abortSignal&&(e.abortSignal.onabort=null),a.status>=200&&a.status<300?s(new Be(a.status,a.statusText,a.response||a.responseText)):n(new L(a.statusText,a.status))},a.onerror=function(){i.logger.log(f.Warning,"Error from HTTP request. "+a.status+": "+a.statusText),n(new L(a.statusText,a.status))},a.ontimeout=function(){i.logger.log(f.Warning,"Timeout from HTTP request."),n(new ge)},a.send(e.content||"")})},t}(Ne),O=function(){function o(){}return o.write=function(t){return""+t+o.RecordSeparator},o.parse=function(t){if(t[t.length-1]!==o.RecordSeparator)throw new Error("Message is incomplete.");var e=t.split(o.RecordSeparator);return e.pop(),e},o.RecordSeparatorCode=30,o.RecordSeparator=String.fromCharCode(o.RecordSeparatorCode),o}(),X=function(){function o(){}return o.prototype.log=function(t,e){},o.instance=new o,o}(),Me=globalThis&&globalThis.__awaiter||function(o,t,e,i){return new(e||(e=Promise))(function(s,n){function a(r){try{c(i.next(r))}catch(l){n(l)}}function u(r){try{c(i.throw(r))}catch(l){n(l)}}function c(r){r.done?s(r.value):new e(function(l){l(r.value)}).then(a,u)}c((i=i.apply(o,t||[])).next())})},Fe=globalThis&&globalThis.__generator||function(o,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(r){return function(l){return c([r,l])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=r[0]&2?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[r[0]&2,n.value]),r[0]){case 0:case 1:n=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,s=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!n||r[1]>n[0]&&r[1]<n[3])){e.label=r[1];break}if(r[0]===6&&e.label<n[1]){e.label=n[1],n=r;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(r);break}n[2]&&e.ops.pop(),e.trys.pop();continue}r=t.call(o,e)}catch(l){r=[6,l],s=0}finally{i=n=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},w=function(){function o(){}return o.isRequired=function(t,e){if(t==null)throw new Error("The '"+e+"' argument is required.")},o.isIn=function(t,e,i){if(!(t in e))throw new Error("Unknown "+i+" value: "+t+".")},o}();function U(o,t){var e=null;return pe(o)?(e="Binary data of length "+o.byteLength,t&&(e+=". Content: '"+Le(o)+"'")):typeof o=="string"&&(e="String data of length "+o.length,t&&(e+=". Content: '"+o+"'.")),e}function Le(o){var t=new Uint8Array(o),e="";return t.forEach(function(i){var s=i<16?"0":"";e+="0x"+s+i.toString(16)+" "}),e.substr(0,e.length-1)}function de(o,t,e,i,s,n,a){return Me(this,void 0,void 0,function(){var u,c,r,l;return Fe(this,function(v){switch(v.label){case 0:return[4,s()];case 1:return r=v.sent(),r&&(c=(u={},u.Authorization="Bearer "+r,u)),o.log(f.Trace,"("+t+" transport) sending data. "+U(n,a)+"."),[4,e.post(i,{content:n,headers:c})];case 2:return l=v.sent(),o.log(f.Trace,"("+t+" transport) request complete. Response status: "+l.statusCode+"."),[2]}})})}function ze(o){return o===void 0?new K(f.Information):o===null?X.instance:o.log?o:new K(o)}var qe=function(){function o(t){this.observers=[],this.cancelCallback=t}return o.prototype.next=function(t){for(var e=0,i=this.observers;e<i.length;e++){var s=i[e];s.next(t)}},o.prototype.error=function(t){for(var e=0,i=this.observers;e<i.length;e++){var s=i[e];s.error&&s.error(t)}},o.prototype.complete=function(){for(var t=0,e=this.observers;t<e.length;t++){var i=e[t];i.complete&&i.complete()}},o.prototype.subscribe=function(t){return this.observers.push(t),new $e(this,t)},o}(),$e=function(){function o(t,e){this.subject=t,this.observer=e}return o.prototype.dispose=function(){var t=this.subject.observers.indexOf(this.observer);t>-1&&this.subject.observers.splice(t,1),this.subject.observers.length===0&&this.subject.cancelCallback().catch(function(e){})},o}(),K=function(){function o(t){this.minimumLogLevel=t}return o.prototype.log=function(t,e){if(t>=this.minimumLogLevel)switch(t){case f.Critical:case f.Error:console.error(f[t]+": "+e);break;case f.Warning:console.warn(f[t]+": "+e);break;case f.Information:console.info(f[t]+": "+e);break;default:console.log(f[t]+": "+e);break}},o}();function pe(o){return o&&typeof ArrayBuffer!="undefined"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}var Ge=function(){function o(){}return o.prototype.writeHandshakeRequest=function(t){return O.write(JSON.stringify(t))},o.prototype.parseHandshakeResponse=function(t){var e,i,s;if(pe(t)){var n=new Uint8Array(t),a=n.indexOf(O.RecordSeparatorCode);if(a===-1)throw new Error("Message is incomplete.");var u=a+1;i=String.fromCharCode.apply(null,n.slice(0,u)),s=n.byteLength>u?n.slice(u).buffer:null}else{var c=t,a=c.indexOf(O.RecordSeparator);if(a===-1)throw new Error("Message is incomplete.");var u=a+1;i=c.substring(0,u),s=c.length>u?c.substring(u):null}var r=O.parse(i);return e=JSON.parse(r[0]),[s,e]},o}(),y;(function(o){o[o.Invocation=1]="Invocation",o[o.StreamItem=2]="StreamItem",o[o.Completion=3]="Completion",o[o.StreamInvocation=4]="StreamInvocation",o[o.CancelInvocation=5]="CancelInvocation",o[o.Ping=6]="Ping",o[o.Close=7]="Close"})(y||(y={}));var Ve=globalThis&&globalThis.__awaiter||function(o,t,e,i){return new(e||(e=Promise))(function(s,n){function a(r){try{c(i.next(r))}catch(l){n(l)}}function u(r){try{c(i.throw(r))}catch(l){n(l)}}function c(r){r.done?s(r.value):new e(function(l){l(r.value)}).then(a,u)}c((i=i.apply(o,t||[])).next())})},Je=globalThis&&globalThis.__generator||function(o,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(r){return function(l){return c([r,l])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=r[0]&2?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[r[0]&2,n.value]),r[0]){case 0:case 1:n=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,s=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!n||r[1]>n[0]&&r[1]<n[3])){e.label=r[1];break}if(r[0]===6&&e.label<n[1]){e.label=n[1],n=r;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(r);break}n[2]&&e.ops.pop(),e.trys.pop();continue}r=t.call(o,e)}catch(l){r=[6,l],s=0}finally{i=n=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},Qe=30*1e3,Ke=function(){function o(t,e,i){var s=this;w.isRequired(t,"connection"),w.isRequired(e,"logger"),w.isRequired(i,"protocol"),this.serverTimeoutInMilliseconds=Qe,this.logger=e,this.protocol=i,this.connection=t,this.handshakeProtocol=new Ge,this.connection.onreceive=function(n){return s.processIncomingData(n)},this.connection.onclose=function(n){return s.connectionClosed(n)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.id=0}return o.create=function(t,e,i){return new o(t,e,i)},o.prototype.start=function(){return Ve(this,void 0,void 0,function(){var t;return Je(this,function(e){switch(e.label){case 0:return t={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(f.Debug,"Starting HubConnection."),this.receivedHandshakeResponse=!1,[4,this.connection.start(this.protocol.transferFormat)];case 1:return e.sent(),this.logger.log(f.Debug,"Sending handshake request."),[4,this.connection.send(this.handshakeProtocol.writeHandshakeRequest(t))];case 2:return e.sent(),this.logger.log(f.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.configureTimeout(),[2]}})})},o.prototype.stop=function(){return this.logger.log(f.Debug,"Stopping HubConnection."),this.cleanupTimeout(),this.connection.stop()},o.prototype.stream=function(t){for(var e=this,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];var n=this.createStreamInvocation(t,i),a=new qe(function(){var c=e.createCancelInvocation(n.invocationId),r=e.protocol.writeMessage(c);return delete e.callbacks[n.invocationId],e.connection.send(r)});this.callbacks[n.invocationId]=function(c,r){if(r){a.error(r);return}c.type===y.Completion?c.error?a.error(new Error(c.error)):a.complete():a.next(c.item)};var u=this.protocol.writeMessage(n);return this.connection.send(u).catch(function(c){a.error(c),delete e.callbacks[n.invocationId]}),a},o.prototype.send=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s=this.createInvocation(t,e,!0),n=this.protocol.writeMessage(s);return this.connection.send(n)},o.prototype.invoke=function(t){for(var e=this,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];var n=this.createInvocation(t,i,!1),a=new Promise(function(u,c){e.callbacks[n.invocationId]=function(l,v){if(v){c(v);return}if(l.type===y.Completion){var b=l;b.error?c(new Error(b.error)):u(b.result)}else c(new Error("Unexpected message type: "+l.type))};var r=e.protocol.writeMessage(n);e.connection.send(r).catch(function(l){c(l),delete e.callbacks[n.invocationId]})});return a},o.prototype.on=function(t,e){!t||!e||(t=t.toLowerCase(),this.methods[t]||(this.methods[t]=[]),this.methods[t].indexOf(e)===-1&&this.methods[t].push(e))},o.prototype.off=function(t,e){if(!!t){t=t.toLowerCase();var i=this.methods[t];if(!!i)if(e){var s=i.indexOf(e);s!==-1&&(i.splice(s,1),i.length===0&&delete this.methods[t])}else delete this.methods[t]}},o.prototype.onclose=function(t){t&&this.closedCallbacks.push(t)},o.prototype.processIncomingData=function(t){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(t=this.processHandshakeResponse(t),this.receivedHandshakeResponse=!0),t)for(var e=this.protocol.parseMessages(t,this.logger),i=0,s=e;i<s.length;i++){var n=s[i];switch(n.type){case y.Invocation:this.invokeClientMethod(n);break;case y.StreamItem:case y.Completion:var a=this.callbacks[n.invocationId];a!=null&&(n.type===y.Completion&&delete this.callbacks[n.invocationId],a(n));break;case y.Ping:break;case y.Close:this.logger.log(f.Information,"Close message received from server."),this.connection.stop(n.error?new Error("Server returned an error on close: "+n.error):null);break;default:this.logger.log(f.Warning,"Invalid message type: "+n.type);break}}this.configureTimeout()},o.prototype.processHandshakeResponse=function(t){var e,i,s;try{e=this.handshakeProtocol.parseHandshakeResponse(t),s=e[0],i=e[1]}catch(u){var n="Error parsing handshake response: "+u;this.logger.log(f.Error,n);var a=new Error(n);throw this.connection.stop(a),a}if(i.error){var n="Server returned handshake error: "+i.error;this.logger.log(f.Error,n),this.connection.stop(new Error(n))}else this.logger.log(f.Debug,"Server handshake complete.");return s},o.prototype.configureTimeout=function(){var t=this;(!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this.timeoutHandle=setTimeout(function(){return t.serverTimeout()},this.serverTimeoutInMilliseconds))},o.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},o.prototype.invokeClientMethod=function(t){var e=this,i=this.methods[t.target.toLowerCase()];if(i){if(i.forEach(function(n){return n.apply(e,t.arguments)}),t.invocationId){var s="Server requested a response, which is not supported in this version of the client.";this.logger.log(f.Error,s),this.connection.stop(new Error(s))}}else this.logger.log(f.Warning,"No client method with the name '"+t.target+"' found.")},o.prototype.connectionClosed=function(t){var e=this,i=this.callbacks;this.callbacks={},Object.keys(i).forEach(function(s){var n=i[s];n(void 0,t||new Error("Invocation canceled due to connection being closed."))}),this.cleanupTimeout(),this.closedCallbacks.forEach(function(s){return s.apply(e,[t])})},o.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},o.prototype.createInvocation=function(t,e,i){if(i)return{arguments:e,target:t,type:y.Invocation};var s=this.id;return this.id++,{arguments:e,invocationId:s.toString(),target:t,type:y.Invocation}},o.prototype.createStreamInvocation=function(t,e){var i=this.id;return this.id++,{arguments:e,invocationId:i.toString(),target:t,type:y.StreamInvocation}},o.prototype.createCancelInvocation=function(t){return{invocationId:t,type:y.CancelInvocation}},o}(),k;(function(o){o[o.None=0]="None",o[o.WebSockets=1]="WebSockets",o[o.ServerSentEvents=2]="ServerSentEvents",o[o.LongPolling=4]="LongPolling"})(k||(k={}));var S;(function(o){o[o.Text=1]="Text",o[o.Binary=2]="Binary"})(S||(S={}));var Xe=function(){function o(){this.isAborted=!1}return o.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(o.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),o}(),M=globalThis&&globalThis.__awaiter||function(o,t,e,i){return new(e||(e=Promise))(function(s,n){function a(r){try{c(i.next(r))}catch(l){n(l)}}function u(r){try{c(i.throw(r))}catch(l){n(l)}}function c(r){r.done?s(r.value):new e(function(l){l(r.value)}).then(a,u)}c((i=i.apply(o,t||[])).next())})},F=globalThis&&globalThis.__generator||function(o,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(r){return function(l){return c([r,l])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=r[0]&2?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[r[0]&2,n.value]),r[0]){case 0:case 1:n=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,s=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!n||r[1]>n[0]&&r[1]<n[3])){e.label=r[1];break}if(r[0]===6&&e.label<n[1]){e.label=n[1],n=r;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(r);break}n[2]&&e.ops.pop(),e.trys.pop();continue}r=t.call(o,e)}catch(l){r=[6,l],s=0}finally{i=n=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},Ye=5*1e3,ce=function(){function o(t,e,i,s,n){this.httpClient=t,this.accessTokenFactory=e||function(){return null},this.logger=i,this.pollAbort=new Xe,this.logMessageContent=s,this.shutdownTimeout=n||Ye}return Object.defineProperty(o.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),o.prototype.connect=function(t,e){return M(this,void 0,void 0,function(){var i,s,n,a,u;return F(this,function(c){switch(c.label){case 0:if(w.isRequired(t,"url"),w.isRequired(e,"transferFormat"),w.isIn(e,S,"transferFormat"),this.url=t,this.logger.log(f.Trace,"(LongPolling transport) Connecting"),e===S.Binary&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return i={abortSignal:this.pollAbort.signal,headers:{},timeout:9e4},e===S.Binary&&(i.responseType="arraybuffer"),[4,this.accessTokenFactory()];case 1:return s=c.sent(),this.updateHeaderToken(i,s),a=t+"&_="+Date.now(),this.logger.log(f.Trace,"(LongPolling transport) polling: "+a),[4,this.httpClient.get(a,i)];case 2:return u=c.sent(),u.statusCode!==200?(this.logger.log(f.Error,"(LongPolling transport) Unexpected response code: "+u.statusCode),n=new L(u.statusText,u.statusCode),this.running=!1):this.running=!0,this.poll(this.url,i,n),[2,Promise.resolve()]}})})},o.prototype.updateHeaderToken=function(t,e){if(e){t.headers.Authorization="Bearer "+e;return}t.headers.Authorization&&delete t.headers.Authorization},o.prototype.poll=function(t,e,i){return M(this,void 0,void 0,function(){var s,n,a,u;return F(this,function(c){switch(c.label){case 0:c.trys.push([0,,8,9]),c.label=1;case 1:return this.running?[4,this.accessTokenFactory()]:[3,7];case 2:s=c.sent(),this.updateHeaderToken(e,s),c.label=3;case 3:return c.trys.push([3,5,,6]),n=t+"&_="+Date.now(),this.logger.log(f.Trace,"(LongPolling transport) polling: "+n),[4,this.httpClient.get(n,e)];case 4:return a=c.sent(),a.statusCode===204?(this.logger.log(f.Information,"(LongPolling transport) Poll terminated by server"),this.running=!1):a.statusCode!==200?(this.logger.log(f.Error,"(LongPolling transport) Unexpected response code: "+a.statusCode),i=new L(a.statusText,a.statusCode),this.running=!1):a.content?(this.logger.log(f.Trace,"(LongPolling transport) data received. "+U(a.content,this.logMessageContent)),this.onreceive&&this.onreceive(a.content)):this.logger.log(f.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return u=c.sent(),this.running?u instanceof ge?this.logger.log(f.Trace,"(LongPolling transport) Poll timed out, reissuing."):(i=u,this.running=!1):this.logger.log(f.Trace,"(LongPolling transport) Poll errored after shutdown: "+u.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.stopped=!0,this.shutdownTimer&&clearTimeout(this.shutdownTimer),this.onclose&&(this.logger.log(f.Trace,"(LongPolling transport) Firing onclose event. Error: "+(i||"<undefined>")),this.onclose(i)),this.logger.log(f.Trace,"(LongPolling transport) Transport finished."),[7];case 9:return[2]}})})},o.prototype.send=function(t){return M(this,void 0,void 0,function(){return F(this,function(e){return this.running?[2,de(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,t,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},o.prototype.stop=function(){return M(this,void 0,void 0,function(){var t,e,i=this;return F(this,function(s){switch(s.label){case 0:return s.trys.push([0,,3,4]),this.running=!1,this.logger.log(f.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),t={headers:{}},[4,this.accessTokenFactory()];case 1:return e=s.sent(),this.updateHeaderToken(t,e),[4,this.httpClient.delete(this.url,t)];case 2:return s.sent(),this.logger.log(f.Trace,"(LongPolling transport) DELETE request accepted."),[3,4];case 3:return this.stopped||(this.shutdownTimer=setTimeout(function(){i.logger.log(f.Warning,"(LongPolling transport) server did not terminate after DELETE request, canceling poll."),i.pollAbort.abort()},this.shutdownTimeout)),[7];case 4:return[2]}})})},o}(),le=globalThis&&globalThis.__awaiter||function(o,t,e,i){return new(e||(e=Promise))(function(s,n){function a(r){try{c(i.next(r))}catch(l){n(l)}}function u(r){try{c(i.throw(r))}catch(l){n(l)}}function c(r){r.done?s(r.value):new e(function(l){l(r.value)}).then(a,u)}c((i=i.apply(o,t||[])).next())})},ue=globalThis&&globalThis.__generator||function(o,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(r){return function(l){return c([r,l])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=r[0]&2?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[r[0]&2,n.value]),r[0]){case 0:case 1:n=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,s=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!n||r[1]>n[0]&&r[1]<n[3])){e.label=r[1];break}if(r[0]===6&&e.label<n[1]){e.label=n[1],n=r;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(r);break}n[2]&&e.ops.pop(),e.trys.pop();continue}r=t.call(o,e)}catch(l){r=[6,l],s=0}finally{i=n=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},Ze=function(){function o(t,e,i,s){this.httpClient=t,this.accessTokenFactory=e||function(){return null},this.logger=i,this.logMessageContent=s}return o.prototype.connect=function(t,e){return le(this,void 0,void 0,function(){var i,s=this;return ue(this,function(n){switch(n.label){case 0:if(w.isRequired(t,"url"),w.isRequired(e,"transferFormat"),w.isIn(e,S,"transferFormat"),typeof EventSource=="undefined")throw new Error("'EventSource' is not supported in your environment.");return this.logger.log(f.Trace,"(SSE transport) Connecting"),[4,this.accessTokenFactory()];case 1:return i=n.sent(),i&&(t+=(t.indexOf("?")<0?"?":"&")+("access_token="+encodeURIComponent(i))),this.url=t,[2,new Promise(function(a,u){var c=!1;e!==S.Text&&u(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));var r=new EventSource(t,{withCredentials:!0});try{r.onmessage=function(l){if(s.onreceive)try{s.logger.log(f.Trace,"(SSE transport) data received. "+U(l.data,s.logMessageContent)+"."),s.onreceive(l.data)}catch(v){s.onclose&&s.onclose(v);return}},r.onerror=function(l){var v=new Error(l.message||"Error occurred");c?s.close(v):u(v)},r.onopen=function(){s.logger.log(f.Information,"SSE connected to "+s.url),s.eventSource=r,c=!0,a()}}catch(l){return Promise.reject(l)}})]}})})},o.prototype.send=function(t){return le(this,void 0,void 0,function(){return ue(this,function(e){return this.eventSource?[2,de(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,t,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]})})},o.prototype.stop=function(){return this.close(),Promise.resolve()},o.prototype.close=function(t){this.eventSource&&(this.eventSource.close(),this.eventSource=null,this.onclose&&this.onclose(t))},o}(),et=globalThis&&globalThis.__awaiter||function(o,t,e,i){return new(e||(e=Promise))(function(s,n){function a(r){try{c(i.next(r))}catch(l){n(l)}}function u(r){try{c(i.throw(r))}catch(l){n(l)}}function c(r){r.done?s(r.value):new e(function(l){l(r.value)}).then(a,u)}c((i=i.apply(o,t||[])).next())})},tt=globalThis&&globalThis.__generator||function(o,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(r){return function(l){return c([r,l])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=r[0]&2?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[r[0]&2,n.value]),r[0]){case 0:case 1:n=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,s=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!n||r[1]>n[0]&&r[1]<n[3])){e.label=r[1];break}if(r[0]===6&&e.label<n[1]){e.label=n[1],n=r;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(r);break}n[2]&&e.ops.pop(),e.trys.pop();continue}r=t.call(o,e)}catch(l){r=[6,l],s=0}finally{i=n=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},nt=function(){function o(t,e,i){this.logger=e,this.accessTokenFactory=t||function(){return null},this.logMessageContent=i}return o.prototype.connect=function(t,e){return et(this,void 0,void 0,function(){var i,s=this;return tt(this,function(n){switch(n.label){case 0:if(w.isRequired(t,"url"),w.isRequired(e,"transferFormat"),w.isIn(e,S,"transferFormat"),typeof WebSocket=="undefined")throw new Error("'WebSocket' is not supported in your environment.");return this.logger.log(f.Trace,"(WebSockets transport) Connecting"),[4,this.accessTokenFactory()];case 1:return i=n.sent(),i&&(t+=(t.indexOf("?")<0?"?":"&")+("access_token="+encodeURIComponent(i))),[2,new Promise(function(a,u){t=t.replace(/^http/,"ws");var c=new WebSocket(t);e===S.Binary&&(c.binaryType="arraybuffer"),c.onopen=function(r){s.logger.log(f.Information,"WebSocket connected to "+t),s.webSocket=c,a()},c.onerror=function(r){u(r.error)},c.onmessage=function(r){s.logger.log(f.Trace,"(WebSockets transport) data received. "+U(r.data,s.logMessageContent)+"."),s.onreceive&&s.onreceive(r.data)},c.onclose=function(r){s.logger.log(f.Trace,"(WebSockets transport) socket closed."),s.onclose&&(r.wasClean===!1||r.code!==1e3?s.onclose(new Error("Websocket closed with status code: "+r.code+" ("+r.reason+")")):s.onclose())}})]}})})},o.prototype.send=function(t){return this.webSocket&&this.webSocket.readyState===WebSocket.OPEN?(this.logger.log(f.Trace,"(WebSockets transport) sending data. "+U(t,this.logMessageContent)+"."),this.webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},o.prototype.stop=function(){return this.webSocket&&(this.webSocket.close(),this.webSocket=null),Promise.resolve()},o}(),D=globalThis&&globalThis.__awaiter||function(o,t,e,i){return new(e||(e=Promise))(function(s,n){function a(r){try{c(i.next(r))}catch(l){n(l)}}function u(r){try{c(i.throw(r))}catch(l){n(l)}}function c(r){r.done?s(r.value):new e(function(l){l(r.value)}).then(a,u)}c((i=i.apply(o,t||[])).next())})},H=globalThis&&globalThis.__generator||function(o,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(r){return function(l){return c([r,l])}}function c(r){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,s&&(n=r[0]&2?s.return:r[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,r[1])).done)return n;switch(s=0,n&&(r=[r[0]&2,n.value]),r[0]){case 0:case 1:n=r;break;case 4:return e.label++,{value:r[1],done:!1};case 5:e.label++,s=r[1],r=[0];continue;case 7:r=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(r[0]===6||r[0]===2)){e=0;continue}if(r[0]===3&&(!n||r[1]>n[0]&&r[1]<n[3])){e.label=r[1];break}if(r[0]===6&&e.label<n[1]){e.label=n[1],n=r;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(r);break}n[2]&&e.ops.pop(),e.trys.pop();continue}r=t.call(o,e)}catch(l){r=[6,l],s=0}finally{i=n=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},fe=100,rt=function(){function o(t,e){e===void 0&&(e={}),this.features={},w.isRequired(t,"url"),this.logger=ze(e.logger),this.baseUrl=this.resolveUrl(t),e=e||{},e.accessTokenFactory=e.accessTokenFactory||function(){return null},e.logMessageContent=e.logMessageContent||!1,this.httpClient=e.httpClient||new We(this.logger),this.connectionState=2,this.options=e}return o.prototype.start=function(t){return t=t||S.Binary,w.isIn(t,S,"transferFormat"),this.logger.log(f.Debug,"Starting connection with transfer format '"+S[t]+"'."),this.connectionState!==2?Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state.")):(this.connectionState=0,this.startPromise=this.startInternal(t),this.startPromise)},o.prototype.send=function(t){if(this.connectionState!==1)throw new Error("Cannot send data if the connection is not in the 'Connected' State.");return this.transport.send(t)},o.prototype.stop=function(t){return D(this,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:this.connectionState=2,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.startPromise];case 2:return e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return this.transport?(this.stopError=t,[4,this.transport.stop()]):[3,6];case 5:e.sent(),this.transport=null,e.label=6;case 6:return[2]}})})},o.prototype.startInternal=function(t){return D(this,void 0,void 0,function(){var e,i,s,n,a,u,c,r=this;return H(this,function(l){switch(l.label){case 0:e=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,l.label=1;case 1:return l.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==k.WebSockets?[3,3]:(this.transport=this.constructTransport(k.WebSockets),[4,this.transport.connect(e,t)]):[3,5];case 2:return l.sent(),[3,4];case 3:throw Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:i=null,s=0,n=function(){var v;return H(this,function(b){switch(b.label){case 0:return[4,a.getNegotiationResponse(e)];case 1:return i=b.sent(),a.connectionState===2?[2,{value:void 0}]:(i.url&&(e=i.url),i.accessToken&&(v=i.accessToken,a.accessTokenFactory=function(){return v}),s++,[2])}})},a=this,l.label=6;case 6:return[5,n()];case 7:if(u=l.sent(),typeof u=="object")return[2,u.value];l.label=8;case 8:if(i.url&&s<fe)return[3,6];l.label=9;case 9:if(s===fe&&i.url)throw Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(e,this.options.transport,i,t)];case 10:l.sent(),l.label=11;case 11:return this.transport instanceof ce&&(this.features.inherentKeepAlive=!0),this.transport.onreceive=this.onreceive,this.transport.onclose=function(v){return r.stopConnection(v)},this.changeState(0,1),[3,13];case 12:throw c=l.sent(),this.logger.log(f.Error,"Failed to start the connection: "+c),this.connectionState=2,this.transport=null,c;case 13:return[2]}})})},o.prototype.getNegotiationResponse=function(t){return D(this,void 0,void 0,function(){var e,i,s,n,a,u;return H(this,function(c){switch(c.label){case 0:return[4,this.accessTokenFactory()];case 1:i=c.sent(),i&&(s=(e={},e.Authorization="Bearer "+i,e)),n=this.resolveNegotiateUrl(t),this.logger.log(f.Debug,"Sending negotiation request: "+n),c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.httpClient.post(n,{content:"",headers:s})];case 3:if(a=c.sent(),a.statusCode!==200)throw Error("Unexpected status code returned from negotiate "+a.statusCode);return[2,JSON.parse(a.content)];case 4:throw u=c.sent(),this.logger.log(f.Error,"Failed to complete negotiation with the server: "+u),u;case 5:return[2]}})})},o.prototype.createConnectUrl=function(t,e){return t+(t.indexOf("?")===-1?"?":"&")+("id="+e)},o.prototype.createTransport=function(t,e,i,s){return D(this,void 0,void 0,function(){var n,a,u,c,r,l,v;return H(this,function(b){switch(b.label){case 0:return n=this.createConnectUrl(t,i.connectionId),this.isITransport(e)?(this.logger.log(f.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=e,[4,this.transport.connect(n,s)]):[3,2];case 1:return b.sent(),this.changeState(0,1),[2];case 2:a=i.availableTransports,u=0,c=a,b.label=3;case 3:return u<c.length?(r=c[u],this.connectionState=0,l=this.resolveTransport(r,e,s),typeof l!="number"?[3,8]:(this.transport=this.constructTransport(l),i.connectionId!==null?[3,5]:[4,this.getNegotiationResponse(t)])):[3,9];case 4:i=b.sent(),n=this.createConnectUrl(t,i.connectionId),b.label=5;case 5:return b.trys.push([5,7,,8]),[4,this.transport.connect(n,s)];case 6:return b.sent(),this.changeState(0,1),[2];case 7:return v=b.sent(),this.logger.log(f.Error,"Failed to start the transport '"+k[l]+"': "+v),this.connectionState=2,i.connectionId=null,[3,8];case 8:return u++,[3,3];case 9:throw new Error("Unable to initialize any of the available transports.")}})})},o.prototype.constructTransport=function(t){switch(t){case k.WebSockets:return new nt(this.accessTokenFactory,this.logger,this.options.logMessageContent);case k.ServerSentEvents:return new Ze(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent);case k.LongPolling:return new ce(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent);default:throw new Error("Unknown transport: "+t+".")}},o.prototype.resolveTransport=function(t,e,i){var s=k[t.transport];if(s==null)this.logger.log(f.Debug,"Skipping transport '"+t.transport+"' because it is not supported by this client.");else{var n=t.transferFormats.map(function(a){return S[a]});if(ot(e,s))if(n.indexOf(i)>=0)if(s===k.WebSockets&&typeof WebSocket=="undefined"||s===k.ServerSentEvents&&typeof EventSource=="undefined")this.logger.log(f.Debug,"Skipping transport '"+k[s]+"' because it is not supported in your environment.'");else return this.logger.log(f.Debug,"Selecting transport '"+k[s]+"'"),s;else this.logger.log(f.Debug,"Skipping transport '"+k[s]+"' because it does not support the requested transfer format '"+S[i]+"'.");else this.logger.log(f.Debug,"Skipping transport '"+k[s]+"' because it was disabled by the client.")}return null},o.prototype.isITransport=function(t){return t&&typeof t=="object"&&"connect"in t},o.prototype.changeState=function(t,e){return this.connectionState===t?(this.connectionState=e,!0):!1},o.prototype.stopConnection=function(t){return D(this,void 0,void 0,function(){return H(this,function(e){return this.transport=null,t=this.stopError||t,t?this.logger.log(f.Error,"Connection disconnected with error '"+t+"'."):this.logger.log(f.Information,"Connection disconnected."),this.connectionState=2,this.onclose&&this.onclose(t),[2]})})},o.prototype.resolveUrl=function(t){if(t.lastIndexOf("https://",0)===0||t.lastIndexOf("http://",0)===0)return t;if(typeof window=="undefined"||!window||!window.document)throw new Error("Cannot resolve '"+t+"'.");var e=window.document.createElement("a");return e.href=t,this.logger.log(f.Information,"Normalizing '"+t+"' to '"+e.href+"'."),e.href},o.prototype.resolveNegotiateUrl=function(t){var e=t.indexOf("?"),i=t.substring(0,e===-1?t.length:e);return i[i.length-1]!=="/"&&(i+="/"),i+="negotiate",i+=e===-1?"":t.substring(e),i},o}();function ot(o,t){return!o||(t&o)!==0}var it="json",st=function(){function o(){this.name=it,this.version=1,this.transferFormat=S.Text}return o.prototype.parseMessages=function(t,e){if(typeof t!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];e===null&&(e=X.instance);for(var i=O.parse(t),s=[],n=0,a=i;n<a.length;n++){var u=a[n],c=JSON.parse(u);if(typeof c.type!="number")throw new Error("Invalid payload.");switch(c.type){case y.Invocation:this.isInvocationMessage(c);break;case y.StreamItem:this.isStreamItemMessage(c);break;case y.Completion:this.isCompletionMessage(c);break;case y.Ping:break;case y.Close:break;default:e.log(f.Information,"Unknown message type '"+c.type+"' ignored.");continue}s.push(c)}return s},o.prototype.writeMessage=function(t){return O.write(JSON.stringify(t))},o.prototype.isInvocationMessage=function(t){this.assertNotEmptyString(t.target,"Invalid payload for Invocation message."),t.invocationId!==void 0&&this.assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")},o.prototype.isStreamItemMessage=function(t){if(this.assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),t.item===void 0)throw new Error("Invalid payload for StreamItem message.")},o.prototype.isCompletionMessage=function(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this.assertNotEmptyString(t.error,"Invalid payload for Completion message."),this.assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")},o.prototype.assertNotEmptyString=function(t,e){if(typeof t!="string"||t==="")throw new Error(e)},o}(),kt=function(){function o(){}return o.prototype.configureLogging=function(t){return w.isRequired(t,"logging"),at(t)?this.logger=t:this.logger=new K(t),this},o.prototype.withUrl=function(t,e){return w.isRequired(t,"url"),this.url=t,typeof e=="object"?this.httpConnectionOptions=e:this.httpConnectionOptions={transport:e},this},o.prototype.withHubProtocol=function(t){return w.isRequired(t,"protocol"),this.protocol=t,this},o.prototype.build=function(){var t=this.httpConnectionOptions||{};if(t.logger===void 0&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var e=new rt(this.url,t);return Ke.create(e,this.logger||X.instance,this.protocol||new st)},o}();function at(o){return o.log!==void 0}const ct={class:"flex justify-start"},lt={key:0},ut={key:1},ft={class:"flex justify-start"},ht={class:"flex"},gt={class:"flex justify-between"},dt=_e({__name:"runTableView",props:{runs:{type:Array,required:!0},title:{type:String,required:!1},dense:{type:Boolean,required:!1},noAffixes:{type:Boolean},noCreatedTime:{type:Boolean},zone:{type:Number,required:!1}},setup(o){const t=o,i=Ee().state.data,{runs:s,dense:n,noAffixes:a,noCreatedTime:u,title:c,zone:r}=Ie(t),l=A([{name:"created",label:"Found",sortable:!1,align:"left",field:h=>h},{name:"zone",label:"Dungeon",sortable:!1,align:"left",field:h=>h},{name:"level",label:"Level",sortable:!1,align:"left",field:h=>h},{name:"time",label:"Time",sortable:!1,align:"left",field:h=>h},{name:"affixes",label:"Affixes",sortable:!1,align:"left",field:h=>h},{name:"players",label:"Players",sortable:!1,align:"left",field:h=>h},{name:"score",label:"Score",sortable:!1,align:"center",field:h=>h}]),v=l.value.map(h=>h.name).filter(h=>{var d=!0;return t.zone&&h=="zone"&&(d=!1),t.noCreatedTime&&h=="created"&&(d=!1),t.noAffixes&&h=="affixes"&&(d=!1),d});let b=A([]);A(v);let ve=A({rowsPerPage:20,page:1,localRuns:[]});A(!1);const Y=G(()=>i.Dungeons),z=G(()=>i.Classes),q=G(()=>i.Specs),be=h=>{for(let d=0;d<Y.value.length;d++){const g=Y.value[d];if(g.keystone_id===h)return g}},Z=xe(),ye=h=>Z.push(h),we=h=>ye(`/lookup/run/${h}`),ee=h=>{if(z.value)for(let d=0;d<z.value.length;d++){const g=z.value[d];if(g.id==h)return g}},me=h=>{var d=h.time.clear_time/h.time.map_time;return d<=.6?3:d<=.8?2:d<=1?1:0},ke=h=>ie.duration(h).format("HH:mm:ss"),Se=h=>ie((h-5)*1e3).fromNow(),Te=h=>{var d;return(d=$(h))==null?void 0:d.role},Ce=h=>{var d,g;return((d=$(h))==null?void 0:d.role)=="TANK"?1e4+h:((g=$(h))==null?void 0:g.role)=="HEALER"?2e4+h:3e4+h},$=h=>{if(!q.value)return null;for(let d=0;d<q.value.length;d++){const g=q.value[d];if(h==g.id)return g}},te=h=>{h.forEach(g=>{g.sortNR=Ce(g.spec),g.role=Te(g.spec)});var d=W._sortBy(h,"sortNR");for(const g in W.groupBy(d,"role"))if(W.groupBy(d,"role").hasOwnProperty(g)){const p=W.groupBy(d,"role")[g];p[0].showIcon=!0}return d};return document.location.origin,Z.currentRoute.value.query,Pe(s,(h,d)=>{b.value=s.value}),Re(()=>{t.runs&&(b.value=s.value)}),(h,d)=>(C(),V(Ae,{title:_(c),rows:_(b),columns:l.value,pagination:_(ve),"rows-per-page-options":[],"row-key":"content_id",dark:"",ref:"Table","hide-bottom":_(n),color:"amber","visible-columns":_(v)},{pagination:T(()=>[]),body:T(g=>[m(se,{props:g,onClick:p=>_(n)?we(g.row.id):g.expand=!g.expand,style:J(`${_(n)?"height: 56px":""}`)},{default:T(()=>[m(I,{key:"created",props:g},{default:T(()=>[P("div",ct,[m(ne,{url:`factions/${g.row.faction.toLowerCase()}.png`},{default:T(({link:p})=>[m(re,{"spinner-size":"10px",class:"factionIconSize","spinner-color":"white",src:p},null,8,["src"])]),_:2},1032,["url"]),j(" "+R(Se(g.row.time.created)),1)])]),_:2},1032,["props"]),m(I,{key:"zone",props:g},{default:T(()=>[P("div",{class:oe(`${_(n)?"":"flex justify-start"}`)},[m(ne,{url:be(g.row.zone.id).imageurl},{default:T(({link:p})=>[m(re,{"spinner-size":"10px",class:"dungeonIconSize","spinner-color":"white",src:p},null,8,["src"])]),_:2},1032,["url"]),g.row.zone.short_name?(C(),E("div",lt,R(g.row.zone.short_name),1)):(C(),E("div",ut,R(g.row.zone.name),1))],2)]),_:2},1032,["props"]),m(I,{key:"level",props:g},{default:T(()=>[P("div",ft,[j(" +"+R(g.row.level)+" ",1),(C(!0),E(N,null,B(me(g.row),(p,x)=>(C(),E("i",{key:x,class:"starIcon material-icons"},"star"))),128))])]),_:2},1032,["props"]),m(I,{key:"time",props:g},{default:T(()=>[j(R(ke(g.row.time.clear_time)),1)]),_:2},1032,["props"]),m(I,{key:"affixes",props:g},{default:T(()=>[P("div",ht,[(C(!0),E(N,null,B(g.row.affixes,(p,x)=>(C(),V(De,{key:"index",affixid:p,border:!1,tooltip:!0},null,8,["affixid"]))),128))])]),_:2},1032,["props"]),m(I,{key:"players",props:g},{default:T(()=>[P("div",{class:oe(["flex",`${_(n)?"justify-around":"justify-between"}`])},[(C(!0),E(N,null,B(te(g.row.players).filter(p=>_(n)?(p==null?void 0:p.role)==="HEALER"||(p==null?void 0:p.role)==="TANK":!0),(p,x)=>(C(),E("div",{style:J(`color: ${ee(p.class).color};`),class:"flex justify-center",key:x},[m(ae,{player:p,region:g.row.region},null,8,["player","region"])],4))),128))],2),P("div",gt,[(C(!0),E(N,null,B(te(g.row.players).filter(p=>_(n)?(p==null?void 0:p.role)==="DAMAGE":!1),(p,x)=>(C(),E("div",{style:J(`color: ${ee(p.class).color};`),class:"flex justify-center",key:x},[m(ae,{player:p,region:g.row.region},null,8,["player","region"])],4))),128))])]),_:2},1032,["props"]),m(I,{key:"score",props:g},{default:T(()=>[j(R(Math.round(g.row.score*10)/10),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick","style"]),g.expand?(C(),V(se,{key:0,class:"hideHover",props:g},{default:T(()=>[m(I,{class:"hideHover",colspan:"100%"},{default:T(()=>[m(Ue,{class:"keystoneView",id:g.row.id},null,8,["id"])]),_:2},1024)]),_:2},1032,["props"])):He("",!0)]),_:1},8,["title","rows","columns","pagination","hide-bottom","visible-columns"]))}});var St=Oe(dt,[["__scopeId","data-v-20459b20"]]);export{kt as H,f as L,St as r};
