import{d as ne,B as de,c as O,r as E,u as he,K as Qe,w as fe,o as ge,l as Se,a as Ce,_ as Z,k as b,h as o,i as k,F as X,C as ae,m as q,t as p,p as i,q as g,af as Fe,aA as He,j as a,z as F,v as ie,x as oe,S as se,N as Ve,g as be,Q as We,ae as ve,n as K,ad as we,M as me,O as le,L as qe,ab as rt,ac as xe,ag as Be,az as lt,dd as nt,D as Ye,$ as it,H as J,a$ as ot,E as dt,G as ct,co as ut,J as _t,a7 as ft,ao as ht,de as vt,T as Ne,aI as Ee,aG as mt,d8 as gt,aa as Ue,bk as Je,bg as yt,e as pt}from"./index.8ea8b5e1.js";import{P as bt}from"./PeriodeSelector.17c99000.js";import{T as kt,k as De}from"./keystoneView.f02d9734.js";import{Q as _e,a as B}from"./QTr.f875d0ae.js";import{Q as ke}from"./QTable.d1b73e65.js";import{a as ue}from"./index.1bf4df2a.js";import"./linq.7bfedf89.js";import{r as xt}from"./Role.efef9eaf.js";import{n as $t}from"./numeral.0ba0bd40.js";import{Q as wt}from"./QCheckbox.c0e3de5f.js";import{a as St}from"./vue3-apexcharts.common.d319f11b.js";import"./use-cache.b0833c75.js";import"./QInput.08aec3fe.js";import"./QMarkupTable.3b30057a.js";const Ct=ne({__name:"PlayerFetcher",props:{realm:{type:String},name:{type:String},season:{type:Number},region:{type:String}},setup(e){const l=e,{realm:t,name:_,season:s,region:r}=de(l),n=O(()=>C.currentRoute.value.params.key),h=E(null),d=E(null),I=E(null),$=he().state.data,C=Qe(),f=()=>{var m=$.apiUrl;const S=C.currentRoute.value.path.includes("blizz");if((S?!n.value:!r.value||!t.value||!_.value)||!s.value)return null;let R=S?`${m}/Player/full/blizzard/${n.value}?season=${s.value}`:`${m}/Player/full?character=${_.value}&realm=${t.value}&region=${r.value}&season=${s.value}`;Ce.get(R).then(D=>{D.data&&(h.value=D.data)}).catch(D=>{d.value=D}).finally(()=>{I.value=!1})},x=()=>{h.value=null,d.value=null,I.value=!0,f()};return fe([_,t,r,s,n],()=>{x()}),ge(()=>{x()}),(m,S)=>Se(m.$slots,"default",{characterData:h.value,loading:I.value,error:d.value})}});const Tt=e=>(ie("data-v-ef29adc6"),e=e(),oe(),e),zt={key:0,class:"MatchContainer"},It=Tt(()=>a("div",null,"There are multiple matches for this character path",-1)),Rt=["href"],At=ne({__name:"OtherMatches",props:{matches:{type:Array,required:!0}},setup(e){const l=e,{matches:t}=de(l),s=he().state.data,r=O(()=>s.Classes),n=O(()=>s.Specs);return(h,d)=>b(t).length>0?(o(),k("div",zt,[It,(o(!0),k(X,null,ae(b(t),(I,y)=>(o(),k("div",{key:y,class:"matchItem flex wrap"},[q(" ["+p(I.player.blizzardId)+"] ",1),i(Fe,{_class:I.player.class},{default:g(()=>{var $,C;return[q(p(I.player.name)+", "+p(($=b(n).find(f=>f.id==I.lastSeenSpec))==null?void 0:$.name)+" "+p((C=b(r).find(f=>f.id==I.player.class))==null?void 0:C.name)+", ",1)]}),_:2},1032,["_class"]),q(" last seen "+p(b(He).utc(I.lastRun.completedTimestamp).local().fromNow())+" - ",1),a("a",{href:`/lookup/player/blizzardId/${I.player.blizzardId}`},"View character",8,Rt)]))),128))])):F("",!0)}});var Ht=Z(At,[["__scopeId","data-v-ef29adc6"]]);const Bt={props:["runs","periode","data"],methods:{shortName(e){var l="";for(let t=0;t<e.split(" ").length;t++){const _=e.split(" ")[t];_.toLowerCase()!=="the"&&(l+=_.charAt(0))}return l}},computed:{filterdRuns(){var e=[];for(let l=0;l<this.runs.length;l++){const t=this.runs[l];(this.periode.start==null||this.periode.end==null||t.time.completed_timestamp>this.periode.start*1e3&&t.time.completed_timestamp<this.periode.end*1e3)&&e.push(t)}return e},raidProgress(){if(!!this.data){var e=this.data.encounters,l=e[e.length-1];if(!!l){var t=l==null?void 0:l.raids[(l==null?void 0:l.raids.length)-1];if(!!t){var _=se._sortBy(t.difficulties,r=>r.difficulty.order).reverse()[0];if(!!_){var s=this.shortName(t.raid.name);return{value:`${_.bosses.length}/${t.raid.bosses.length} ${this.shortName(_.difficulty.name)}`,name:s}}}}}},PlayerScore(){var e=se.groupBy(this.filterdRuns,_=>_.zone.id),l=0;for(const _ in e)if(e.hasOwnProperty(_)){const s=e[_];var t=null;for(let r=0;r<s.length;r++){const n=s[r];(t==null||t.score<n.score)&&(t=n)}l+=t.score}return l}}};function Dt(e,l,t,_,s,r){return o(),k("div",null,[Se(e.$slots,"default",{score:r.PlayerScore,raidProgress:r.raidProgress,runs:r.filterdRuns})])}var Ft=Z(Bt,[["render",Dt]]);const qt={props:["faction"],computed:{computedColor(){if(this.faction)return this.faction.toLowerCase().charAt(0)==="a"?"#027be3":"#b30000"}}};function jt(e,l,t,_,s,r){return o(),k("div",{style:Ve(`color: ${r.computedColor};`)},[Se(e.$slots,"default")],4)}var Pt=Z(qt,[["render",jt]]);const Lt={class:"flex justify-between"},Mt={class:"flex"},Ot={class:"self-center capitalize"},Kt={class:"HeaderSize3"},Nt={key:0},Et=a("br",null,null,-1),Ut={class:"flex"},Gt=["href"],Qt=["src"],Vt={class:"flex items-end"},Wt={key:0,class:"flex items-end field"},Yt={class:"value self-end"},Jt=a("br",{style:{"margin-right":"60px"}},null,-1),Xt=ne({__name:"Header",props:{data:{type:Object},fields:{},backupData:{type:Object}},setup(e){const l=e,{data:t,fields:_}=de(l),s=O(()=>{var I,y,$,C,f,x;const r=(y=(I=t.value)==null?void 0:I.region)!=null?y:l.backupData.region,n=(C=($=t.value)==null?void 0:$.realm)!=null?C:l.backupData.realm,h=(x=(f=t.value)==null?void 0:f.name)!=null?x:l.backupData.name;var d=[{image:se.FormatToCloudinary("external/wow.png"),description:"View on armory",link:`https://www.worldofwarcraft.com/en-${r.replace("eu","gb")}/character/${n}/${h}`},{image:se.FormatToCloudinary("external/rio.png"),description:"View on Raider.IO",link:`https://raider.io/characters/${r}/${n}/${h}`},{image:se.FormatToCloudinary("external/warcraftlogs.png"),description:"View on Warcraftlogs.com",link:`https://www.warcraftlogs.com/character/${r}/${n}/${h}`},{image:se.FormatToCloudinary("external/raidbots.png"),description:"Simulate on Raidbots.com",link:`https://www.raidbots.com/simbot/quick?region=${r}&realm=${n}&name=${h}`}];return d});return(r,n)=>{var d,I,y,$,C,f,x,m,S,R,D;const h=be("router-link");return o(),k("div",Lt,[a("div",null,[a("div",Mt,[i(We,{class:"avatarImage",src:(I=(d=b(t))==null?void 0:d.avatar_url)!=null?I:"https://res.cloudinary.com/djpcbbeqx/image/upload/v1664310107/external/wow.png"},null,8,["src"]),a("div",Ot,[a("div",Kt,[i(Fe,{_class:(y=b(t))==null?void 0:y.character_class},{default:g(()=>{var U,N;return[q(p((N=(U=b(t))==null?void 0:U.name)!=null?N:e.backupData.name),1)]}),_:1},8,["_class"])]),($=b(t))!=null&&$.guild?(o(),k("div",Nt,[i(h,{to:`/lookup/guild/${(C=b(t))==null?void 0:C.guild.region}/${(f=b(t))==null?void 0:f.guild.realm}/${(x=b(t))==null?void 0:x.guild.name}`},{default:g(()=>{var U;return[i(Pt,{faction:(U=b(t))==null?void 0:U.guild.faction},{default:g(()=>{var N;return[q(p((N=b(t))==null?void 0:N.guild.name),1)]}),_:1},8,["faction"])]}),_:1},8,["to"])])):F("",!0),a("div",null,"["+p((S=(m=b(t))==null?void 0:m.region)!=null?S:e.backupData.region)+"] "+p((D=(R=b(t))==null?void 0:R.realm)!=null?D:e.backupData.realm),1)])]),Et,a("div",Ut,[(o(!0),k(X,null,ae(b(s),(U,N)=>(o(),k("div",{class:"externalLinks",key:N},[a("a",{href:U.link,target:"_blank"},[a("img",{class:"iconLink",src:U.image},null,8,Qt),i(ve,null,{default:g(()=>[q(p(U.description),1)]),_:2},1024)],8,Gt)]))),128))])]),a("div",Vt,[(o(!0),k(X,null,ae(b(_),(U,N,ce)=>(o(),k("div",{key:N,class:"flex items-end"},[U!=null&&U!="undefined: undefined"?(o(),k("div",Wt,[a("div",Yt,p(U),1),q(" "+p(N),1)])):F("",!0),ce!==3?(o(),K(we,{key:1,class:"self-end",style:{height:"40px"},vertical:"",dark:""})):F("",!0)]))),128)),Jt])])}}});const Zt={style:{width:"100%"}},ea={class:"flex justify-around talents"},ta={class:"flex"},aa=["onClick"],sa=ne({__name:"TalentLine",props:{talents:{type:Array,required:!0},spec:{type:Number}},setup(e){const l=e,{talents:t,spec:_}=de(l),s=E(_.value),n=he().state.data,h=O(()=>n.Specs),d=$=>{if(h.value)for(let C=0;C<h.value.length;C++){const f=h.value[C];if(f.id==$)return f}},I=O(()=>{var $=t.value.find(C=>{var f;return((f=C.filter(x=>x.specId)[0])==null?void 0:f.specId)===s.value});return $.filter(C=>C.isActive===void 0||C.isActive)}),y=O(()=>Object.keys(t.value.reduce(($,C)=>{var f;return{...$,[`${(f=C[0])==null?void 0:f.specId}`]:C}},{})).map($=>parseInt($)));return ge(()=>{_.value&&(s.value=_.value)}),($,C)=>(o(),k("div",Zt,[a("div",ea,[(o(!0),k(X,null,ae(b(I),f=>(o(),K(kt,{talent:f,key:`${f.id}`},null,8,["talent"]))),128))]),i(we,{dark:""}),a("div",ta,[(o(!0),k(X,null,ae(b(y),(f,x)=>{var m;return o(),k("div",{key:f,class:"flex"},[a("div",{onClick:S=>s.value=f,class:me(["pointer clickHover specButton text-center",`${s.value==f&&"specButtonSelected"}`])},p((m=d(f))==null?void 0:m.name),11,aa),x!=b(y).length-1?(o(),K(we,{key:0,vertical:"",dark:""})):F("",!0)])}),128))])]))}});const ra=e=>(ie("data-v-4f17e486"),e=e(),oe(),e),la={id:"Box"},na=ra(()=>a("div",{id:"Header",class:"HeaderSize4"}," Dungeon statistics ",-1)),ia={id:"Container"},oa={class:"flex dungeonItem"},da={key:1,class:"material-icons"},ca={key:2},ua={key:3},_a=ne({__name:"DungeonOverview",props:{runs:{type:Array}},setup(e){const l=e,{runs:t}=de(l),s=he().state.data,r=O(()=>s.Dungeons),n=$=>r.value.find(C=>C.keystone_id==$),h=E([]),d=E({rowsPerPage:20,page:1,sortBy:"dungeon"}),I=E([{name:"dungeon",label:"Dungeon",field:$=>$.dungeon=="All"?"All":$.item.zone.name,sortable:!0},{name:"highest_lvl",label:"Highest level",field:"highest_lvl",sortable:!0},{name:"highest_score",label:"Highest score",field:"highest_score",sortable:!0},{name:"avg_time",label:"Average time",field:"avg_time",sortable:!0,format:$=>`${le.duration($).format("hh:mm:ss")}`},{name:"total_time",label:"Total time",field:"total_time",sortable:!0,format:$=>`${le.duration($).format("hh:mm:ss")}`},{name:"runs",label:"Runs",field:"runs",sortable:!0},{name:"ontime_rate",label:"Success rate",field:"ontime_rate",sortable:!0,format:$=>`${$}%`}]),y=O(()=>{var $=[...t.value],C=se.groupBy($,D=>D.zone.id);C.All=$;var f=[];for(const D in C)if(C.hasOwnProperty(D)){const U=C[D];var x=0,m=0,S=0,R={item:U[0],dungeon:D,highest_lvl:0,highest_score:0,avg_lvl:0,avg_score:0,avg_time:0,total_time:0,runs:0,ontime_rate:0};for(const N of U)R.runs++,R.highest_lvl<N.keystone_level&&(R.highest_lvl=N.keystone_level),R.highest_score<N.score&&(R.highest_score=Math.floor(N.score)),x+=N.score,m+=N.keystone_level,R.total_time+=N.time.clear_time,N.time.ontime&&S++;R.avg_time=R.total_time/R.runs,R.total_time=R.total_time,R.avg_lvl=Math.floor(m/R.runs),R.avg_score=Math.floor(x/R.runs),R.ontime_rate=Math.floor(S/R.runs*100),f.push(R)}return f});return fe(t,()=>{h.value=y.value}),ge(()=>{h.value=y.value}),($,C)=>(o(),k("div",la,[na,a("div",ia,[i(ke,{"rows-per-page-options":[],"card-class":"HeaderFont","table-class":"HeaderFont","table-header-class":"HeaderFont",dark:"",dense:"",rows:h.value,columns:I.value,pagination:d.value,"row-key":"dungeon"},{body:g(f=>[i(_e,{props:f,class:"text-center"},{default:g(()=>[i(B,{key:"dungeon"},{default:g(()=>{var x,m,S;return[a("div",oa,[f.row.dungeon!="All"?(o(),K(qe,{key:0,url:(S=(m=n((x=f.row.item.zone)==null?void 0:x.id))==null?void 0:m.imageurl)!=null?S:`backgrounds/dungeons/${f.row.item.zone.slug}.png`},{default:g(({link:R})=>[i(We,{class:"tableIcon",src:R},null,8,["src"])]),_:2},1032,["url"])):(o(),k("i",da,"menu")),f.row.dungeon!="All"?(o(),k("div",ca,p(f.row.item.zone.name),1)):(o(),k("div",ua,"All"))])]}),_:2},1024),i(B,{key:"highest_lvl"},{default:g(()=>[q(p(f.row.highest_lvl),1)]),_:2},1024),i(B,{key:"highest_score"},{default:g(()=>[q(p(f.row.highest_score),1)]),_:2},1024),i(B,{key:"avg_time"},{default:g(()=>[q(p(`${b(le).duration(f.row.avg_time).format("hh:mm:ss")}`),1)]),_:2},1024),i(B,{key:"total_time"},{default:g(()=>[q(p(`${b(le).duration(f.row.total_time).format("hh:mm:ss")}`),1)]),_:2},1024),i(B,{key:"runs"},{default:g(()=>[q(p(f.row.runs),1)]),_:2},1024),i(B,{key:"intime_rate"},{default:g(()=>[q(p(f.row.ontime_rate)+"% ",1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])]))}});var fa=Z(_a,[["__scopeId","data-v-4f17e486"]]);const ha=e=>(ie("data-v-1a69f862"),e=e(),oe(),e),va={id:"Box"},ma=ha(()=>a("div",{id:"Header",class:"HeaderSize4"}," Affix statistics ",-1)),ga={id:"Container"},ya={class:"flex tableIconContainer"},pa=ne({__name:"AffixOverview",props:{runs:{type:Array},from:{},to:{}},setup(e){const l=e,{runs:t,from:_,to:s}=de(l);fe(t,()=>{r.value=C.value}),ge(()=>{r.value=C.value});const r=E([]),n=E({rowsPerPage:20,page:1,sortBy:"affix"}),h=E([{name:"affix",label:"Affix",field:f=>f.affix.name,sortable:!0,align:"center"},{name:"highest_lvl",label:"Highest level",field:"highest_lvl",sortable:!0,align:"center"},{name:"highest_score",label:"Highest score",field:"highest_score",sortable:!0,align:"center"},{name:"total_time",label:"Total time",field:"total_time",align:"center",sortable:!0,format:f=>`${le.duration(f).format("hh:mm:ss")}`},{name:"runs",label:"Runs",field:"runs",sortable:!0,align:"center"},{name:"ontime_rate",label:"Success rate",field:"ontime_rate",sortable:!0,format:f=>`${f}%`,align:"center"}]),d=f=>{for(let x=0;x<$.value.length;x++){const m=$.value[x];if(m.id===f)return m}},y=he().state.data,$=O(()=>y.Affixes),C=O(()=>{var f=[...t.value],x=[];for(let V=0;V<f.length;V++){const P=f[V];var m=P.affixes,S=4;P.keystone_level<=3?S=1:P.keystone_level<=6?S=2:P.keystone_level<=9?S=3:P.keystone_level>=10&&(S=4);for(let v=0;v<S;v++){const T=m[v];var R=!1;for(let w=0;w<x.length;w++){const z=x[w];z.affix===T&&(z.runs.push(P),R=!0)}if(!R){var D={affix:T,runs:[P]};x.push(D)}}}var U=[];for(let V=0;V<x.length;V++){const P=x[V];var N=0,ce=0,Q=0,L={affix:d(P.affix),highest_lvl:0,highest_score:0,avg_lvl:0,avg_score:0,avg_time:0,total_time:0,runs:0,ontime_rate:0};for(const v of P.runs)L.runs++,L.highest_lvl<v.keystone_level&&(L.highest_lvl=v.keystone_level),L.highest_score<v.score&&(L.highest_score=Math.floor(v.score)),N+=v.score,ce+=v.keystone_level,L.total_time+=v.time.clear_time,v.time.ontime&&Q++;L.avg_time=L.total_time/L.runs,L.total_time=L.total_time,L.avg_lvl=Math.floor(ce/L.runs),L.avg_score=Math.floor(N/L.runs),L.ontime_rate=Math.floor(Q/L.runs*100),U.push(L)}return U});return(f,x)=>(o(),k("div",va,[ma,a("div",ga,[i(ke,{"rows-per-page-options":[],"card-class":"HeaderFont","table-class":"HeaderFont","table-header-class":"HeaderFont",dark:"",dense:"",rows:r.value,columns:h.value,pagination:n.value,"row-key":"affix"},{body:g(m=>[i(_e,{props:m,class:"text-center"},{default:g(()=>[i(B,{key:"affix"},{default:g(()=>[a("div",ya,[i(ue,{affixid:m.row.affix.id,size:"13px",border:!0,class:"tableIcon"},null,8,["affixid"]),a("div",null,p(m.row.affix.name),1)])]),_:2},1024),i(B,{key:"highest_lvl"},{default:g(()=>[q(p(m.row.highest_lvl),1)]),_:2},1024),i(B,{key:"highest_score"},{default:g(()=>[q(p(m.row.highest_score),1)]),_:2},1024),i(B,{key:"total_time"},{default:g(()=>[q(p(`${b(le).duration(m.row.total_time).format("hh:mm:ss")}`),1)]),_:2},1024),i(B,{key:"runs"},{default:g(()=>[q(p(m.row.runs),1)]),_:2},1024),i(B,{key:"intime_rate"},{default:g(()=>[q(p(m.row.ontime_rate)+"% ",1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])]))}});var ba=Z(pa,[["__scopeId","data-v-1a69f862"]]);const ka=e=>(ie("data-v-dd1fc832"),e=e(),oe(),e),xa={id:"Box"},$a=ka(()=>a("div",{id:"Header",class:"HeaderSize4"}," Affix combonations statistics ",-1)),wa={id:"Container"},Sa={class:"flex justify-around"},Ca=ne({__name:"AffixSetOverview",props:{runs:{type:Array},from:{},to:{}},setup(e){const l=e,{runs:t,from:_,to:s}=de(l),r=E([]),n=E({rowsPerPage:20,page:1,sortBy:"affix"}),h=E([{name:"affix",label:"Affix",field:f=>f.affix.affix,sortable:!0,align:"center"},{name:"highest_lvl",label:"Highest level",field:"highest_lvl",sortable:!0,align:"center"},{name:"highest_score",label:"Highest score",field:"highest_score",sortable:!0,align:"center"},{name:"total_time",label:"Total time",field:"total_time",sortable:!0,format:f=>`${le.duration(f).format("hh:mm:ss")}`,align:"center"},{name:"runs",label:"Runs",field:"runs",sortable:!0,align:"center"},{name:"ontime_rate",label:"Success rate",field:"ontime_rate",sortable:!0,format:f=>`${f}%`,align:"center"}]),d=f=>{for(let x=0;x<$.value.length;x++){const m=$.value[x];if(m.id===f)return m}},y=he().state.data,$=O(()=>y.Affixes),C=O(()=>{var f=[...t.value],x=[];for(let L=0;L<f.length;L++){const V=f[L];var m=V.affixes.map(P=>d(P).name).join(" "),S=!1;for(let P=0;P<x.length;P++){const v=x[P];v.affix===m&&(v.runs.push(V),S=!0)}if(!S){var R={affix:m,runs:[V],affixes:V.affixes.map(P=>d(P))};x.push(R)}}var D=[];for(let L=0;L<x.length;L++){const V=x[L];var U=0,N=0,ce=0,Q={affix:V,highest_lvl:0,highest_score:0,avg_lvl:0,avg_score:0,avg_time:0,total_time:0,runs:0,ontime_rate:0};for(const P of V.runs)Q.runs++,Q.highest_lvl<P.keystone_level&&(Q.highest_lvl=P.keystone_level),Q.highest_score<P.score&&(Q.highest_score=Math.floor(P.score)),U+=P.score,N+=P.keystone_level,Q.total_time+=P.time.clear_time,P.time.ontime&&ce++;Q.avg_time=Q.total_time/Q.runs,Q.total_time=Q.total_time,Q.avg_lvl=Math.floor(N/Q.runs),Q.avg_score=Math.floor(U/Q.runs),Q.ontime_rate=Math.floor(ce/Q.runs*100),D.push(Q)}return D});return fe(t,()=>{r.value=C.value}),ge(()=>{r.value=C.value}),(f,x)=>(o(),k("div",xa,[$a,a("div",wa,[i(ke,{"rows-per-page-options":[],"card-class":"HeaderFont","table-class":"HeaderFont","table-header-class":"HeaderFont",dark:"",dense:"",rows:r.value,columns:h.value,pagination:n.value,"row-key":"affixCombo"},{body:g(m=>[i(_e,{props:m,class:"text-center"},{default:g(()=>[i(B,{key:"affix"},{default:g(()=>[a("div",Sa,[(o(!0),k(X,null,ae(m.row.affix.affixes,(S,R)=>(o(),k("div",{class:"flex affixItem",key:R},[i(ue,{affixid:S.id,border:!0,size:"13px",class:"tableIcon"},null,8,["affixid"]),a("div",null,p(S.name),1)]))),128))])]),_:2},1024),i(B,{key:"highest_lvl"},{default:g(()=>[q(p(m.row.highest_lvl),1)]),_:2},1024),i(B,{key:"highest_score"},{default:g(()=>[q(p(m.row.highest_score),1)]),_:2},1024),i(B,{key:"total_time"},{default:g(()=>[q(p(`${b(le).duration(m.row.total_time).format("hh:mm:ss")}`),1)]),_:2},1024),i(B,{key:"runs"},{default:g(()=>[q(p(m.row.runs),1)]),_:2},1024),i(B,{key:"intime_rate"},{default:g(()=>[q(p(m.row.ontime_rate)+"% ",1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])]))}});var Ta=Z(Ca,[["__scopeId","data-v-dd1fc832"]]);const za={props:["details"],watch:{progressedRaids(){this.choseLatestRaid()}},created(){this.choseLatestRaid()},watch:{details(){this.choseLatestRaid()}},data(){return{SelectedRaid:null,expanded:null}},methods:{choseLatestRaid(){this.SelectedRaid=this.progressedRaids[this.progressedRaids.length-1]},isOdd(e){return e%2===1},GetTotalKills(e){if(e){var l=0;for(let t=0;t<e.length;t++)l+=e[t].kills;return l}else return 0},GetProgress(e){return`${e.bosses.length}/${this.SelectedRaid.raid.bosses.length}${e.difficulty.name[0]} `}},computed:{size(){return{width:this.$q.screen.width,height:this.$q.screen.height}},progressedRaids(){if(this.details){var e=[];return this.details.encounters.forEach(l=>{var t;(t=l==null?void 0:l.raids)==null||t.forEach(_=>{e.push(_)})}),e}}}},Te=e=>(ie("data-v-729e9e30"),e=e(),oe(),e),Ia={key:0,class:"MainWindow"},Ra={key:0,class:"row raidItemHeader"},Aa=Te(()=>a("div",{class:"raidItemName"},null,-1)),Ha=Te(()=>a("div",{class:"raidItemProgress text-center"},"Progress",-1)),Ba=Te(()=>a("div",{class:"raidItemKills text-center"},"Kills",-1)),Da=[Aa,Ha,Ba],Fa={class:"fullwidth",id:"RaidDivContainer"},qa={class:"fullwidth",id:"RaidDivHeader"},ja={key:0},Pa={key:0,class:"flex justify-between"},La={class:"row"},Ma={key:0},Oa={key:1},Ka={style:{"margin-top":"5px"}},Na={class:"flex",style:{}},Ea={style:{"margin-right":"15px"}},Ua={style:{"margin-right":"27px"}},Ga={key:1},Qa={class:"raidItemName"},Va=Te(()=>a("div",{class:"raidItemProgress text-center"},null,-1)),Wa={class:"raidItemKills text-center"};function Ya(e,l,t,_,s,r){return t.details?(o(),k("div",Ia,[s.SelectedRaid?(o(),k("div",Ra,Da)):F("",!0),a("div",Fa,[a("div",qa,[i(rt,{dark:"",modelValue:s.SelectedRaid,"onUpdate:modelValue":l[0]||(l[0]=n=>s.SelectedRaid=n),dense:"",options:r.progressedRaids,"option-label":n=>n===null&&n.raid===null?"Null value":n.raid.name,"hide-dropdown-icon":"","display-value":s.SelectedRaid?s.SelectedRaid.raid.name:"","popup-content-class":"searchResultsBox"},null,8,["modelValue","options","option-label","display-value"])]),s.SelectedRaid?(o(),k("div",ja,[(o(!0),k(X,null,ae(s.SelectedRaid.difficulties,(n,h)=>(o(),k("div",{key:h,class:me({minorlighter:!r.isOdd(h)})},[n.difficulty.name!="Raid Finder"?(o(),k("div",Pa,[a("div",La,[s.expanded!=n.difficulty.id?(o(),k("div",Ma,[i(xe,{dense:"",flat:"",color:"grey",icon:"add",onClick:d=>s.expanded=n.difficulty.id},null,8,["onClick"])])):(o(),k("div",Oa,[i(xe,{dense:"",flat:"",color:"grey",icon:"remove",onClick:l[1]||(l[1]=d=>s.expanded=s.expanded==null)})])),a("div",Ka,p(n.difficulty.name),1)]),a("div",Na,[a("div",Ea,p(r.GetProgress(n)),1),a("div",Ua,p(r.GetTotalKills(n.bosses)),1)])])):F("",!0),s.expanded==n.difficulty.id?(o(),k("div",Ga,[(o(!0),k(X,null,ae(n.bosses,(d,I)=>(o(),k("div",{class:me(["row bossItemContainer",{minorlighter:!r.isOdd(I)}]),key:I},[a("div",Qa,p(d.boss.name),1),Va,a("div",Wa,p(d.kills),1)],2))),128))])):F("",!0)],2))),128))])):F("",!0)])])):F("",!0)}var Ja=Z(za,[["render",Ya],["__scopeId","data-v-729e9e30"]]);const Xa={props:["title"],data(){return{}}},Za={id:"Box"},es={id:"Header",class:"HeaderSize4"},ts={id:"Container"};function as(e,l,t,_,s,r){return o(),k("div",Za,[a("div",es,p(t.title),1),a("div",ts,[Se(e.$slots,"default",{class:"TakeAll"},void 0,!0)])])}var Xe=Z(Xa,[["render",as],["__scopeId","data-v-c357c466"]]);const ss={props:["runs","mainPlayerId","region"],components:{container:Xe,roleIcon:xt,classTextColor:Fe},data(){return{data:null,paginationControl:{rowsPerPage:6,page:1,descending:!0,sortBy:"sharedRunsAmount"},Columns:[{name:"role",label:"Role",align:"left"},{name:"name",label:"Name",align:"left"},{name:"sharedRunsAmount",label:"Shared Runs",field:"sharedRunsAmount",align:"right"},{name:"sharedScore",label:"Team Score",sortable:!0,field:"sharedScore",align:"right"},{name:"score",label:"Score in current season",sortable:!0,field:"score",align:"right"}]}},methods:{fetchDetails(e){var l=this.$store.state.data.apiUrl,t=this,_=se._sortBy(this.data,e.sortBy);e.descending&&(_=_.reverse());var s=(e.page-1)*e.rowsPerPage,r=se.from(_,s);for(let n=0;n<e.rowsPerPage;n++){const h=r[n];h&&(h.fetching=!0,Ce.get(`${l}/Player/blizzard_id?id=${h.id}&region=${this.region}`).then(d=>{h.name=d.data.name,h.realm=d.data.realm,h.score=d.data.score,h.details=d.data,h.fetching=!1,t.data=[...t.data]}).catch(d=>{h.detailsFailed=!0,h.fetching=!1}))}},getSpec(e,l){var t=[];e.forEach(s=>{s.players.forEach(r=>{if(r.id==l){var n=t.filter(h=>h.spec==r.spec);n.length!=0?n[0].count++:t.push({spec:r.spec,count:1})}})});var _=t.sort().reverse()[0].spec;return _},reload(){setTimeout(()=>{location.reload(!0)},250)}},computed:{activeRows(){var e=this.$refs.table;if(e){var l=e.computedRows;if(l)return l}return null},playedWithPlayers(){var e=[];if(this.runs){var l=[];this.runs.forEach(s=>{s.players.forEach(r=>{if(r.id!=this.mainPlayerId){var n={...s};n.distinctId=r.id,l.push(n)}})});var t=se.groupBy(l,s=>s.distinctId);for(const s in t)if(t.hasOwnProperty(s)){const r=t[s];var _={id:s,spec:this.getSpec(r,s),sharedRunsAmount:r.length+s*1e-11,sharedScore:se.GetScore(r)+s*1e-11};e.push(_)}}return e}},watch:{runs(){this.data=this.playedWithPlayers}},created(){this.data=this.playedWithPlayers}},rs=e=>(ie("data-v-61021ab9"),e=e(),oe(),e),ls={class:"flex justify-end"},ns={class:"flex justify-end"},is={class:"flex justify-end"},os={class:"flex justify-end"},ds=rs(()=>a("div",{class:"flex justify-end"}," 0 ",-1));function cs(e,l,t,_,s,r){const n=be("roleIcon"),h=be("classTextColor"),d=be("router-link"),I=be("container");return s.data.length>0?(o(),K(I,{key:0,title:"Keystone friends"},{default:g(()=>[s.data?(o(),K(ke,{key:0,ref:"table",rows:s.data,columns:s.Columns,pagination:s.paginationControl,"row-key":"id",dense:"","rows-per-page-options":[],dark:"",color:"amber","onUpdate:pagination":l[1]||(l[1]=y=>r.fetchDetails(y))},{body:g(y=>[i(_e,{props:y},{default:g(()=>{var $,C,f,x;return[i(B,{key:"role"},{default:g(()=>[i(n,{tooltip:!0,class:"rowIcon",spec:y.row.spec},null,8,["spec"])]),_:2},1024),!y.row.name&&!(($=y.row)!=null&&$.fetching)?(o(),K(B,{key:"name"},{default:g(()=>[i(h,{spec:y.row.spec},{default:g(()=>[q(p(y.row.id),1)]),_:2},1032,["spec"])]),_:2},1024)):y.row.name?(o(),K(B,{key:"name"},{default:g(()=>[i(h,{spec:y.row.spec},{default:g(()=>[i(d,{onClick:l[0]||(l[0]=m=>r.reload()),to:`/lookup/player/${t.region}/${y.row.realm}/${y.row.name}`},{default:g(()=>[q(p(y.row.name),1)]),_:2},1032,["to"])]),_:2},1032,["spec"])]),_:2},1024)):(C=y.row)!=null&&C.fetching?(o(),K(B,{key:"name"},{default:g(()=>[i(Be,{color:"yellow",size:"15px"}),i(ve,null,{default:g(()=>[q("fetching info from api")]),_:1})]),_:1})):F("",!0),i(B,{key:"sharedruns"},{default:g(()=>[a("div",ls,p(Math.round(y.row.sharedRunsAmount)),1)]),_:2},1024),i(B,{key:"teamscore"},{default:g(()=>[a("div",ns,p(Math.round(y.row.sharedScore*10)/10),1)]),_:2},1024),y.row.score!=null&&!((f=y.row)!=null&&f.fetching)?(o(),K(B,{key:"score"},{default:g(()=>[a("div",is,p(Math.round(y.row.score*10)/10),1)]),_:2},1024)):(x=y.row)!=null&&x.fetching?(o(),K(B,{key:"score"},{default:g(()=>[a("div",os,[i(Be,{color:"yellow",size:"15px"}),i(ve,null,{default:g(()=>[q("fetching info from api")]),_:1})])]),_:1})):(o(),K(B,{key:"score"},{default:g(()=>[ds]),_:1}))]}),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])):F("",!0)]),_:1})):F("",!0)}var us=Z(ss,[["render",cs],["__scopeId","data-v-61021ab9"]]);const _s=e=>(ie("data-v-32fd520e"),e=e(),oe(),e),fs={key:0},hs={id:"gearDivContainer"},vs={id:"gearDivHeader",class:"flex justify-between"},ms=_s(()=>a("div",{class:"HeaderSize4"},"Gear",-1)),gs={id:"gearContent"},ys={class:"flex"},ps=["id"],bs={class:"ilvlBox"},ks=["href","data-wowhead"],xs=["src"],$s=ne({__name:"GearInfo",props:{details:{type:Object}},setup(e){const l=e,{details:t}=de(l),_=s=>{var r=`item=${s.id}&ilvl=${s.item_level}`;if(s.azerite_powers&&(r+=`&azerite-powers=${s.azerite_powers.map(h=>h.id).join(":")}`),s.enchantment&&(r+=`&ench=${s.enchantment}`),s.socket&&(r+=`&gems=${s.socket}`),s.azerite){var n=[];s.azerite.slot_0_id!=null&&s.azerite.slot_0_id!=null&&n.push(s.azerite.slot_0_id),s.azerite.slot_1_id!=null&&s.azerite.slot_1_id!=null&&n.push(s.azerite.slot_1_id),s.azerite.slot_2_id!=null&&s.azerite.slot_2_id!=null&&n.push(s.azerite.slot_2_id),s.azerite.slot_3_id!=null&&s.azerite.slot_3_id!=null&&n.push(s.azerite.slot_3_id),r+=`&azerite-essence-powers=${n.join(":")}`}return s.transmog&&(r+=`&transmog=${s.transmog}`),s.bonus_list!==null&&s.bonus_list!==void 0&&(r+=`&bonus=${s.bonus_list.replace(/,/g,":")}`),r};return O(()=>{if(t.value){var s=Object.keys(t.value.items).map(function(r){if(r!="averageItemLevelEquipped"&&r!="averageItemLevel"){var n=t.value.items[r];return n.slot=r,n}}).filter(r=>r);return s}}),(s,r)=>b(t)?(o(),k("div",fs,[a("div",hs,[a("div",vs,[ms,a("div",null,p(b(t).equipped_item_level)+"/"+p(b(t).average_item_level),1)]),a("div",gs,[a("div",ys,[(o(!0),k(X,null,ae(b(t).equipment,(n,h)=>{var d;return o(),k("div",{class:"item",key:h},[a("div",{id:"gearSlot"+n.slot,class:"text-center"},[a("div",bs,p(n.item_level),1),a("a",{href:`http://www.wowhead.com/item=${n.id}`,"data-wowhead":_(n)},[i(qe,{url:(d=n.iconUrl)!=null?d:"https://wow.zamimg.com/images/wow/icons/medium/"+n.icon+".jpg",size:"35px"},{default:g(({link:I})=>[a("img",{class:"itemIcon",src:I},null,8,xs)]),_:2},1032,["url"])],8,ks)],8,ps)])}),128))])])])])):F("",!0)}});var ws=Z($s,[["__scopeId","data-v-32fd520e"]]);const{capitalize:Ge}=nt,Ss={props:["details","compact"],data(){return{width:1200}},computed:{powerType(){return Ge(this.details.statistics.power_type)},options(){return{stroke:{show:!0,curve:"smooth",lineCap:"butt",colors:void 0,width:2,dashArray:0},legend:{show:!1,foreColor:"#414141"},colors:["#CCAC00","#2e2e2e"],labels:["Gained","Missing"],dataLabels:{enabled:!1},plotOptions:{pie:{donut:{},size:75}}}}},methods:{onResize(e){this.width=e.width},capitalize(e){return Ge(e)},short(e,l){return $t(e).format(l)}}},Ze=e=>(ie("data-v-35c284af"),e=e(),oe(),e),Cs=Ze(()=>a("div",{id:"Header",class:"HeaderSize4"},"Stats",-1)),Ts={id:"Container",class:"flex justify-around"},zs={class:"infoField"},Is=Ze(()=>a("br",null,null,-1)),Rs={style:{width:"100%"},class:"flex justify-around"},As={style:{width:"100%"},class:"flex justify-around"},Hs={class:"text-center statField"};function Bs(e,l,t,_,s,r){return t.details?(o(),k("div",{key:0,class:me({cWidth:t.compact,rncWidth:!t.compact}),id:"Box"},[Cs,a("div",Ts,[i(lt,{onResize:r.onResize},null,8,["onResize"]),a("div",zs,[Is,a("div",Rs,[(o(!0),k(X,null,ae(t.details.statistics.stats.filter(n=>n.effective!=0),(n,h)=>(o(),k("div",{class:"text-center statField",key:h},[a("div",null,p(r.capitalize(n.name)),1),a("div",null,p(r.short(n.effective,"0.0 a")),1)]))),128))]),a("div",As,[(o(!0),k(X,null,ae(t.details.statistics.stats.filter(n=>n.rating!=0&&n.rating_bonus!=0&&n.value!=0&&!n.name.includes("ranged")&&!n.name.includes("spell")),(n,h)=>(o(),k("div",{class:"text-center statField",key:h},[a("div",null,p(r.capitalize(n.name.replace("melee_crit","Critical Strike").replace("melee_haste","Haste"))),1),a("div",null,p(r.short(n.rating,"0.0 a")),1)]))),128)),a("div",Hs,[a("div",null,p(r.capitalize("Versatility")),1),a("div",null,p(r.short(t.details.statistics.versatility,"0.0 a")),1)])])])])],2)):F("",!0)}var Ds=Z(Ss,[["render",Bs],["__scopeId","data-v-35c284af"]]),Fs=Ye({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:l,emit:t}){let _=!1,s,r,n,h,d,I;function y(){s&&s(),s=null,_=!1,clearTimeout(n),clearTimeout(h),r!==void 0&&r.removeEventListener("transitionend",d),d=null}function $(m,S,R){m.style.overflowY="hidden",S!==void 0&&(m.style.height=`${S}px`),m.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,_=!0,s=R}function C(m,S){m.style.overflowY=null,m.style.height=null,m.style.transition=null,y(),S!==I&&t(S)}function f(m,S){let R=0;r=m,_===!0?(y(),R=m.offsetHeight===m.scrollHeight?0:void 0):I="hide",$(m,R,S),n=setTimeout(()=>{m.style.height=`${m.scrollHeight}px`,d=D=>{(Object(D)!==D||D.target===m)&&C(m,"show")},m.addEventListener("transitionend",d),h=setTimeout(d,e.duration*1.1)},100)}function x(m,S){let R;r=m,_===!0?y():(I="show",R=m.scrollHeight),$(m,R,S),n=setTimeout(()=>{m.style.height=0,d=D=>{(Object(D)!==D||D.target===m)&&C(m,"hide")},m.addEventListener("transitionend",d),h=setTimeout(d,e.duration*1.1)},100)}return it(()=>{_===!0&&y()}),()=>J(ot,{css:!1,appear:e.appear,onEnter:f,onLeave:x},l.default)}});const qs=["none","strict","leaf","leaf-filtered"];var js=Ye({name:"QTree",props:{...dt,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>qs.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazy-load","after-show","after-hide"],setup(e,{slots:l,emit:t}){const{proxy:_}=_t(),{$q:s}=_,r=ct(e,s),n=E({}),h=E(e.ticked||[]),d=E(e.expanded||[]);let I={};ut(()=>{I={}});const y=O(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(r.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),$=O(()=>e.selected!==void 0),C=O(()=>e.icon||s.iconSet.tree.icon),f=O(()=>e.controlColor||e.color),x=O(()=>e.textColor!==void 0?` text-${e.textColor}`:""),m=O(()=>{const u=e.selectedColor||e.color;return u?` text-${u}`:""}),S=O(()=>e.filterMethod!==void 0?e.filterMethod:(u,A)=>{const c=A.toLowerCase();return u[e.labelKey]&&u[e.labelKey].toLowerCase().indexOf(c)>-1}),R=O(()=>{const u={},A=(c,j)=>{const H=c.tickStrategy||(j?j.tickStrategy:e.tickStrategy),G=c[e.nodeKey],W=c[e.childrenKey]&&c[e.childrenKey].length>0,ye=c.disabled!==!0&&$.value===!0&&c.selectable!==!1,te=c.disabled!==!0&&c.expandable!==!1,at=H!=="none",$e=H==="strict",Oe=H==="leaf-filtered",Re=H==="leaf"||H==="leaf-filtered";let Ae=c.disabled!==!0&&c.tickable!==!1;Re===!0&&Ae===!0&&j&&j.tickable!==!0&&(Ae=!1);let pe=c.lazy;pe===!0&&n.value[G]!==void 0&&Array.isArray(c[e.childrenKey])===!0&&(pe=n.value[G]);const M={key:G,parent:j,isParent:W,lazy:pe,disabled:c.disabled,link:c.disabled!==!0&&(ye===!0||te===!0&&(W===!0||pe===!0)),children:[],matchesFilter:e.filter?S.value(c,e.filter):!0,selected:G===e.selected&&ye===!0,selectable:ye,expanded:W===!0?d.value.includes(G):!1,expandable:te,noTick:c.noTick===!0||$e!==!0&&pe&&pe!=="loaded",tickable:Ae,tickStrategy:H,hasTicking:at,strictTicking:$e,leafFilteredTicking:Oe,leafTicking:Re,ticked:$e===!0?h.value.includes(G):W===!0?!1:h.value.includes(G)};if(u[G]=M,W===!0&&(M.children=c[e.childrenKey].map(Y=>A(Y,M)),e.filter&&(M.matchesFilter!==!0?M.matchesFilter=M.children.some(Y=>Y.matchesFilter):M.noTick!==!0&&M.disabled!==!0&&M.tickable===!0&&Oe===!0&&M.children.every(Y=>Y.matchesFilter!==!0||Y.noTick===!0||Y.tickable!==!0)===!0&&(M.tickable=!1)),M.matchesFilter===!0&&(M.noTick!==!0&&$e!==!0&&M.children.every(Y=>Y.noTick)===!0&&(M.noTick=!0),Re))){if(M.ticked=!1,M.indeterminate=M.children.some(Y=>Y.indeterminate===!0),M.tickable=M.tickable===!0&&M.children.some(Y=>Y.tickable),M.indeterminate!==!0){const Y=M.children.reduce((Ke,st)=>st.ticked===!0?Ke+1:Ke,0);Y===M.children.length?M.ticked=!0:Y>0&&(M.indeterminate=!0)}M.indeterminate===!0&&(M.indeterminateNextState=M.children.every(Y=>Y.tickable!==!0||Y.ticked!==!0))}return M};return e.nodes.forEach(c=>A(c,null)),u});fe(()=>e.ticked,u=>{h.value=u}),fe(()=>e.expanded,u=>{d.value=u});function D(u){const A=[].reduce,c=(j,H)=>{if(j||!H)return j;if(Array.isArray(H)===!0)return A.call(Object(H),c,j);if(H[e.nodeKey]===u)return H;if(H[e.childrenKey])return c(null,H[e.childrenKey])};return c(null,e.nodes)}function U(){return h.value.map(u=>D(u))}function N(){return d.value.map(u=>D(u))}function ce(u){return u&&R.value[u]?R.value[u].expanded:!1}function Q(){e.expanded!==void 0?t("update:expanded",[]):d.value=[]}function L(){const u=d.value,A=c=>{c[e.childrenKey]&&c[e.childrenKey].length>0&&c.expandable!==!1&&c.disabled!==!0&&(u.push(c[e.nodeKey]),c[e.childrenKey].forEach(A))};e.nodes.forEach(A),e.expanded!==void 0?t("update:expanded",u):d.value=u}function V(u,A,c=D(u),j=R.value[u]){if(j.lazy&&j.lazy!=="loaded"){if(j.lazy==="loading")return;n.value[u]="loading",Array.isArray(c[e.childrenKey])!==!0&&(c[e.childrenKey]=[]),t("lazy-load",{node:c,key:u,done:H=>{n.value[u]="loaded",c[e.childrenKey]=Array.isArray(H)===!0?H:[],ft(()=>{const G=R.value[u];G&&G.isParent===!0&&P(u,!0)})},fail:()=>{delete n.value[u],c[e.childrenKey].length===0&&delete c[e.childrenKey]}})}else j.isParent===!0&&j.expandable===!0&&P(u,A)}function P(u,A){let c=d.value;const j=e.expanded!==void 0;if(j===!0&&(c=c.slice()),A){if(e.accordion&&R.value[u]){const H=[];R.value[u].parent?R.value[u].parent.children.forEach(G=>{G.key!==u&&G.expandable===!0&&H.push(G.key)}):e.nodes.forEach(G=>{const W=G[e.nodeKey];W!==u&&H.push(W)}),H.length>0&&(c=c.filter(G=>H.includes(G)===!1))}c=c.concat([u]).filter((H,G,W)=>W.indexOf(H)===G)}else c=c.filter(H=>H!==u);j===!0?t("update:expanded",c):d.value=c}function v(u){return u&&R.value[u]?R.value[u].ticked:!1}function T(u,A){let c=h.value;const j=e.ticked!==void 0;j===!0&&(c=c.slice()),A?c=c.concat(u).filter((H,G,W)=>W.indexOf(H)===G):c=c.filter(H=>u.includes(H)===!1),j===!0&&t("update:ticked",c)}function w(u,A,c){const j={tree:_,node:u,key:c,color:e.color,dark:r.value};return Ue(j,"expanded",()=>A.expanded,H=>{H!==A.expanded&&V(c,H)}),Ue(j,"ticked",()=>A.ticked,H=>{H!==A.ticked&&T([c],H)}),j}function z(u){return(e.filter?u.filter(A=>R.value[A[e.nodeKey]].matchesFilter):u).map(A=>Pe(A))}function ee(u){if(u.icon!==void 0)return J(Ne,{class:"q-tree__icon q-mr-sm",name:u.icon,color:u.iconColor});const A=u.img||u.avatar;if(A)return J("img",{class:`q-tree__${u.img?"img":"avatar"} q-mr-sm`,src:A})}function re(){t("after-show")}function ze(){t("after-hide")}function Pe(u){const A=u[e.nodeKey],c=R.value[A],j=u.header&&l[`header-${u.header}`]||l["default-header"],H=c.isParent===!0?z(u[e.childrenKey]):[],G=H.length>0||c.lazy&&c.lazy!=="loaded";let W=u.body&&l[`body-${u.body}`]||l["default-body"];const ye=j!==void 0||W!==void 0?w(u,c,A):null;return W!==void 0&&(W=J("div",{class:"q-tree__node-body relative-position"},[J("div",{class:x.value},[W(ye)])])),J("div",{key:A,class:`q-tree__node relative-position q-tree__node--${G===!0?"parent":"child"}`},[J("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(c.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(c.selected===!0?" q-tree__node--selected":"")+(c.disabled===!0?" q-tree__node--disabled":""),tabindex:c.link===!0?0:-1,onClick:te=>{Me(u,c,te)},onKeypress(te){ht(te)!==!0&&(te.keyCode===13?Me(u,c,te,!0):te.keyCode===32&&Ie(u,c,te,!0))}},[J("div",{class:"q-focus-helper",tabindex:-1,ref:te=>{I[c.key]=te}}),c.lazy==="loading"?J(vt,{class:"q-tree__spinner",color:f.value}):G===!0?J(Ne,{class:"q-tree__arrow"+(c.expanded===!0?" q-tree__arrow--rotate":""),name:C.value,onClick(te){Ie(u,c,te)}}):null,c.hasTicking===!0&&c.noTick!==!0?J(wt,{class:"q-tree__tickbox",modelValue:c.indeterminate===!0?null:c.ticked,color:f.value,dark:r.value,dense:!0,keepColor:!0,disable:c.tickable!==!0,onKeydown:Ee,"onUpdate:modelValue":te=>{tt(c,te)}}):null,J("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(c.selected===!0?m.value:x.value)},[j?j(ye):[ee(u),J("div",u[e.labelKey])]])]),G===!0?e.noTransition===!0?J("div",{class:"q-tree__node-collapsible"+x.value,key:`${A}__q`},[W,J("div",{class:"q-tree__children"+(c.disabled===!0?" q-tree__node--disabled":"")},c.expanded?H:null)]):J(Fs,{duration:e.duration,onShow:re,onHide:ze},()=>mt(J("div",{class:"q-tree__node-collapsible"+x.value,key:`${A}__q`},[W,J("div",{class:"q-tree__children"+(c.disabled===!0?" q-tree__node--disabled":"")},H)]),[[gt,c.expanded]])):W])}function Le(u){const A=I[u];A&&A.focus()}function Me(u,A,c,j){j!==!0&&Le(A.key),$.value&&A.selectable?e.noSelectionUnset===!1?t("update:selected",A.key!==e.selected?A.key:null):A.key!==e.selected&&t("update:selected",A.key===void 0?null:A.key):Ie(u,A,c,j),typeof u.handler=="function"&&u.handler(u)}function Ie(u,A,c,j){c!==void 0&&Ee(c),j!==!0&&Le(A.key),V(A.key,!A.expanded,u,A)}function tt(u,A){if(u.indeterminate===!0&&(A=u.indeterminateNextState),u.strictTicking)T([u.key],A);else if(u.leafTicking){const c=[],j=H=>{H.isParent?(A!==!0&&H.noTick!==!0&&H.tickable===!0&&c.push(H.key),H.leafTicking===!0&&H.children.forEach(j)):H.noTick!==!0&&H.tickable===!0&&(H.leafFilteredTicking!==!0||H.matchesFilter===!0)&&c.push(H.key)};j(u),T(c,A)}}return e.defaultExpandAll===!0&&L(),Object.assign(_,{getNodeByKey:D,getTickedNodes:U,getExpandedNodes:N,isExpanded:ce,collapseAll:Q,expandAll:L,setExpanded:V,isTicked:v,setTicked:T}),()=>{const u=z(e.nodes);return J("div",{class:y.value},u.length===0?e.filter?e.noResultsLabel||s.lang.tree.noResults:e.noNodesLabel||s.lang.tree.noNodes:u)}}});const Ps={props:["details","compact"],methods:{change(e){var l={label:e.name,id:e.id},t=[];if(e.statistics)for(let s=0;s<e.statistics.length;s++){const r=e.statistics[s];var _={label:`${r.name}: ${r.quantity}`};t.push(_)}if(e.sub_categories)for(let s=0;s<e.sub_categories.length;s++){const r=e.sub_categories[s];t.push(this.change(r))}return l.children=t,l}},computed:{nodes(){var e=JSON.parse(this.details.achievements_statistics).categories,l={id:1,name:"Statistics",sub_categories:e},t=this.change(l);return t.children}}},Ls=e=>(ie("data-v-677c2941"),e=e(),oe(),e),Ms=Ls(()=>a("div",{id:"Header",class:"HeaderSize4"},"Statistics",-1)),Os={id:"Container"};function Ks(e,l,t,_,s,r){return t.details?(o(),k("div",{key:0,class:me({cWidth:t.compact,rncWidth:!t.compact}),id:"Box"},[Ms,a("div",Os,[i(Je,{style:{height:"255px"}},{default:g(()=>[i(js,{dark:"",nodes:r.nodes,"node-key":"label"},null,8,["nodes"])]),_:1})])],2)):F("",!0)}var Ns=Z(Ps,[["render",Ks],["__scopeId","data-v-677c2941"]]);const Es=e=>(ie("data-v-825e266c"),e=e(),oe(),e),Us={key:0,id:"Box"},Gs=Es(()=>a("div",{id:"Header",class:"HeaderSize4"},"Recent keystone runs",-1)),Qs={id:"Container"},Vs={class:"placeLeft flex"},Ws={class:"flex justify-end relative"},Ys=["onClick"],Js={class:"chestContainer flex justify-start"},Xs={class:"placeRight"},Zs={class:"background HeaderFont viewItem"},er=ne({__name:"recentRunsBox",props:{runs:{type:Array}},setup(e){const l=e,{runs:t}=de(l),_=O(()=>[...t.value].sort((d,I)=>d.time.completed_timestamp-I.time.completed_timestamp).reverse()),s=d=>{var I=d.time.map_time-d.time.clear_time;return d.time.clear_time<=d.time.map_time*.6?3:d.time.clear_time<=d.time.map_time*.8?2:I>=0?1:0},r=d=>d%2===1,n=d=>He(d).fromNow(),h=d=>He(d).format("HH:mm DD.MM.YYYY");return(d,I)=>b(t)?(o(),k("div",Us,[Gs,i(Je,{style:{height:"158px"}},{default:g(()=>[a("div",Qs,[(o(!0),k(X,null,ae(b(_),(y,$)=>(o(),k("div",{key:$},[$<20?(o(),k("div",{key:0,class:me(["runRow",{dark:r($)}])},[a("div",Vs,[a("div",Ws,[a("div",{class:"Pointer",onClick:C=>d.$refs[`run${y.keystonrun_id}`][0].show()},p(y.zone.name)+" +"+p(y.keystone_level),9,Ys),a("div",null,[a("div",Js,[(o(!0),k(X,null,ae(s(y),(C,f)=>(o(),k("i",{key:f,class:"starIcon material-icons"},"star"))),128))])])])]),a("div",Xs,[q(p(n(y.time.completed_timestamp))+" ",1),i(ve,null,{default:g(()=>[q(p(h(y.time.completed_timestamp)),1)]),_:2},1024)])],2)):F("",!0),i(yt,{ref_for:!0,ref:`run${y.keystonrun_id}`},{default:g(()=>[a("div",Zs,[i(De,{id:y.keystonrun_id},null,8,["id"])])]),_:2},1536)]))),128))])]),_:1})])):F("",!0)}});var tr=Z(er,[["__scopeId","data-v-825e266c"]]);const ar={props:["details","character"],data(){return{btnText:"Update",interval:null}},methods:{normalizeTime(e){return e*1e3},startTimer(e){var l=this;this.interval=setInterval(()=>{var _;var t=l.normalizeTime((_=l.details)==null?void 0:_.created)+36e5-new Date().getTime();e(le.duration(t).format("hh:mm:ss")),t<=0&&(e(null),clearInterval(l.interval))},1e3)},niceTimestamp(e){return e?le.utc(e).local().fromNow():"Unknown"},fetchDetails(){this.btnText="Updating";var e=this.character,l=this,t=this.$store.state.data.apiUrl;Ce.get(`${t}/Player/new_details?character=${e.name}&realm=${e.realm}&region=${e.region}&checkblizzard=true`).then(_=>{if(_.data){if(_.data.character=e,!_.data.fetchTimestamp){var s=new Date().getTime();_.data.fetchTimestamp=s}l.startTimer(r=>{r?l.btnText=`Can be updated in ${r}`:l.btnText="Update"}),this.$emit("update",_.data)}}).catch(_=>{})}},computed:{now(){return new Date().getTime()},disAllowUpdate(){return this.btnText!=="Update"}},created(){var t;var e=this,l=this.normalizeTime((t=e.details)==null?void 0:t.created)+36e5-new Date().getTime();l>0&&this.startTimer(_=>{_?e.btnText=`Can be updated in ${_}`:e.btnText="Update"})}},je=e=>(ie("data-v-5cd068f0"),e=e(),oe(),e),sr={key:0,id:"Box"},rr=je(()=>a("div",{id:"Header",class:"HeaderSize4"},"Update",-1)),lr=je(()=>a("br",null,null,-1)),nr={id:"Container",class:"flex justify-around"},ir={class:"boxRow1"},or={class:"boxRow1"},dr=je(()=>a("br",null,null,-1));function cr(e,l,t,_,s,r){var n,h;return t.details?(o(),k("div",sr,[rr,lr,a("div",nr,[a("div",ir,"Last logout: "+p(r.niceTimestamp((n=t.details)==null?void 0:n.last_login_timestamp)),1),a("div",or,"Last update on site: "+p(r.niceTimestamp(r.normalizeTime(((h=t.details)==null?void 0:h.created)-5))),1),i(xe,{disable:r.disAllowUpdate,onClick:l[0]||(l[0]=d=>r.fetchDetails()),class:"boxRow1",label:s.btnText,icon:"update",outline:""},null,8,["disable","label"])]),dr])):F("",!0)}var ur=Z(ar,[["render",cr],["__scopeId","data-v-5cd068f0"]]);const _r=e=>(ie("data-v-55654612"),e=e(),oe(),e),fr={key:0,class:"Header HeaderSize4"},hr={id:"chart",class:"HeaderFont"},vr=_r(()=>a("div",null,"These setting can be changed in the settings wheel up in the right",-1)),mr=ne({__name:"ChestsChart",props:{runs:{type:Array,required:!0}},setup(e){const l=e,{runs:t}=de(l),_=E([]),s=E({chart:{foreColor:"#a1a1a1"},plotOptions:{bar:{barHeight:"100%",distributed:!0,horizontal:!0}},colors:["#DAA520","#980DE9","#228B22","#696969"],xaxis:{categories:["Three Chest","Two Chest","One Chest","Not in time"]},yaxis:{labels:{show:!1}},dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(y,$){return $.w.globals.labels[$.dataPointIndex]+":  "+y},offsetX:0,dropShadow:{enabled:!0}},tooltip:{theme:"dark",x:{show:!1},y:{title:{formatter:function(){return""}}}}}),n=he().state.data,h=O(()=>n.settings),d=O(()=>n.SelectedPeriode),I=()=>{if(t.value){var y=t.value.filter(S=>S.time.clear_time<S.time.map_time*.6),$=t.value.filter(S=>S.time.clear_time<S.time.map_time*.8&&S.time.clear_time>S.time.map_time*.6),C=t.value.filter(S=>S.time.clear_time<S.time.map_time&&S.time.clear_time>S.time.map_time*.8),f=t.value.filter(S=>S.time.clear_time>S.time.map_time);_.value=[{data:[y.length,$.length,C.length,f.length]}]}else{var x=h.value,m=n.apiUrl;Ce.get(`${m}/Stats/ChestStats?periode=${d.value}&min_level=${x.min_keystonelevel}&amount=${x.max_runs}&limitToLowestDungeon=${x.limitbylowestdungeon}`).then(S=>{_.value=[{data:S.data}]}).catch(S=>{console.log(S)})}};return fe([t,d],()=>{I()}),ge(()=>{I()}),(y,$)=>(o(),k("div",{class:me([{Box:b(t)},"relative"])},[b(t)?(o(),k("div",fr,"Chest statistics")):F("",!0),a("div",hr,[i(b(St),{type:"bar",height:"350",options:s.value,series:_.value},null,8,["options","series"]),b(t)?F("",!0):(o(),K(ve,{key:0},{default:g(()=>[a("div",null,"This data is generated from the top "+p(b(h).max_runs)+" runs from every dungeon, that are higher than level "+p(b(h).min_keystonelevel)+".",1),vr]),_:1}))])],2))}});var gr=Z(mr,[["__scopeId","data-v-55654612"]]);const yr={props:["renames"],components:{container:Xe},methods:{moment(e){return se.GetMoment(e)},timeFormatAgo(e){return this.moment(e).fromNow()},timeFormatDate(e){return this.moment(e)}},computed:{renamesLimited(){var e=se.take(this.renames,4);return e}}},pr={class:"container"},br={class:"flex justify-around"},kr={class:"marginTop"},xr={class:"marginTop"},$r=a("i",{class:"fs25 material-icons"},"arrow_right_alt",-1),wr={class:"marginTop"};function Sr(e,l,t,_,s,r){const n=be("container");return o(),K(n,{title:"Player Renames"},{default:g(()=>[(o(!0),k(X,null,ae(r.renamesLimited,(h,d)=>(o(),k("div",{key:d},[a("div",pr,[a("div",br,[a("div",kr,[q(p(r.timeFormatAgo(h.changed))+" ",1),i(ve,null,{default:g(()=>[q(p(r.timeFormatDate(h.changed)),1)]),_:2},1024)]),a("div",xr,p(h.old_name),1),$r,a("div",wr,p(h.new_name),1)])])]))),128))]),_:1})}var Cr=Z(yr,[["render",Sr]]);const Tr={class:"boxBorder"},zr=a("div",{class:"Header HeaderSize4"}," Top Dungeon Runs ",-1),Ir={class:"flex justify-end relative"},Rr={class:"chestContainer flex justify-start"},Ar={class:"flex justify-center"},Hr={class:"flex justify-start",style:{width:"140px"}},Br=a("br",null,null,-1),Dr=a("br",null,null,-1),Fr={class:"historyContainer background"},qr={key:0,class:"SelectedMarker material-icons"},jr={class:"text-center"},Pr={class:"flex justify-center relative"},Lr={class:"chestContainer flex justify-start"},Mr={class:"flex justify-center"},Or={class:"flex justify-start",style:{width:"140px"}},Kr=a("br",null,null,-1),Nr=ne({__name:"DungeonListv2",props:{runs:{},from:{},to:{}},setup(e){const l=e,{runs:t,from:_,to:s}=de(l);E([]),E(!1),E([]);const r=E({rowsPerPage:999,page:1,sortBy:"score",descending:!0}),n=E({rowsPerPage:10,page:1,sortBy:"complete_timestamp",descending:!0}),h=E([{name:"view",label:"View",align:"left"},{name:"complete_timestamp",field:v=>v.time.completed_timestamp,sortable:!0,sort:(v,T,w,z)=>w.time.completed_timestamp-z.time.completed_timestamp,label:"Completed",align:"center"},{name:"lvl",label:"Level",field:v=>v.keystone_level,sortable:!0,align:"center",sort:(v,T,w,z)=>w.keystone_level-z.keystone_level,format:(v,T)=>`${T.keystone_level}${R(T)}`},{name:"clear_time",label:"Time",field:v=>v.time.clear_time,sortable:!0,align:"center",sort:(v,T,w,z)=>w.time.clear_time-z.time.clear_time,format:(v,T)=>`${L(T.time.clear_time)}`},{name:"affixes",label:"Affixes",field:v=>v.affixes,sortable:!0,align:"center",sort:(v,T,w,z)=>w.reduce((ee,re)=>ee+re,0)-z.reduce((ee,re)=>ee+re,0),format:(v,T)=>`${[D(T.affixes[0]).name,D(T.affixes[1]).name,D(T.affixes[2]).name,D(T.affixes[3]).name].join(",")}`},{name:"score",label:"Score",field:v=>v.score,sortable:!0,align:"center",sort:(v,T,w,z)=>w.score-z.score,format:(v,T)=>`${Math.round(T.score*100)/100}`}]),d=E([{name:"view",label:"View",align:"left"},{name:"zone_name",label:"Dungeon",field:v=>v.zone.name,sortable:!0,align:"left"},{name:"level",label:"Level",field:v=>v.keystone_level,sortable:!0,align:"right",sort:(v,T,w,z)=>w.keystone_level-z.keystone_level,format:(v,T)=>`${T.keystone_level}${R(T)}`},{name:"time",label:"Time",field:v=>v.time.clear_time,sortable:!0,align:"right",sort:(v,T,w,z)=>w.time.clear_time-z.time.clear_time,format:(v,T)=>`${L(T.time.clear_time)}`},{name:"affixes",label:"Affixes",field:v=>v.affixes,sortable:!0,align:"center",sort:(v,T,w,z)=>w.reduce((ee,re)=>ee+re,0)-z.reduce((ee,re)=>ee+re,0),format:(v,T)=>`${[D(T.affixes[0]).name,D(T.affixes[1]).name,D(T.affixes[2]).name,D(T.affixes[3]).name].join(",")}`},{name:"score",label:"Score",field:v=>v.score,sortable:!0,align:"right",sort:(v,T,w,z)=>w.score-z.score,format:(v,T)=>`${Math.round(T.score*100)/100}`}]),I=E([]),y=E([]),C=he().state.data,f=O(()=>C.Dungeons),x=O(()=>C.Affixes),m=v=>f.value.find(T=>T.keystone_id==v),S=v=>{for(let T=0;T<y.value.length;T++)if(y.value[T].keystonrun_id===v.keystonrun_id)return!0;return!1},R=v=>{var T="";for(let w=0;w<V(v);w++)T+="*";return T},D=v=>{for(let T=0;T<x.value.length;T++){const w=x.value[T];if(w.id==v)return w}},U=()=>{I.value=se.groupBy(t.value,v=>v.zone.id),y.value=N(I.value)},N=v=>{var T=[];for(const w in v)if(v.hasOwnProperty(w)){const z=v[w];T.push(se._sortBy(z,"score").reverse()[0])}return T},ce=v=>le(v).format("hh:mm DD.MM.YYYY"),Q=v=>le(v).fromNow(),L=v=>le.duration(v).format("h:mm:ss"),V=v=>{var T=v.time.map_time-v.time.clear_time;return v.time.clear_time<=v.time.map_time*.6?3:v.time.clear_time<=v.time.map_time*.8?2:T>=0?1:0};fe(t,()=>{U()});const P=pt();return ge(()=>{U(),P.screen.setSizes({sm:300,lg:1e3,xl:2e3})}),(v,T)=>(o(),k("div",Tr,[zr,i(ke,{rows:y.value,columns:d.value,dark:"",grid:b(P).screen.width<710,bordered:b(P).screen.width<710,flat:b(P).screen.width<710,"card-class":"HeaderFont","table-class":"HeaderFont","table-header-class":"HeaderFont",pagination:r.value,"hide-bottom":"","row-key":w=>w.zone.id},{body:g(w=>[i(_e,{props:w},{default:g(()=>[i(B,{key:"view",props:w},{default:g(()=>{var z,ee,re;return[i(qe,{url:(re=(ee=m((z=w.row.zone)==null?void 0:z.id))==null?void 0:ee.imageurl)!=null?re:`backgrounds/dungeons/${w.row.zone.slug}.png`},{default:g(({link:ze})=>[i(xe,{style:Ve(`background-size: 150% 150%; background-image: url('${ze}');`),class:"btnBackground",dense:"",round:"",flat:"",icon:w.expand?"arrow_drop_up":"arrow_drop_down",onClick:Pe=>w.expand=!w.expand},null,8,["style","icon","onClick"])]),_:2},1032,["url"])]}),_:2},1032,["props"]),i(B,{key:"zone_name",props:w},{default:g(()=>[q(p(w.row.zone.name),1)]),_:2},1032,["props"]),i(B,{key:"level",props:w},{default:g(()=>[a("div",Ir,[a("div",null,p(w.row.keystone_level),1),a("div",null,[a("div",Rr,[(o(!0),k(X,null,ae(V(w.row),(z,ee)=>(o(),k("i",{key:ee,class:"starIcon material-icons"},"star"))),128))])])])]),_:2},1032,["props"]),i(B,{key:"time",props:w},{default:g(()=>[q(p(L(w.row.time.clear_time)),1)]),_:2},1032,["props"]),i(B,{key:"affixes",props:w},{default:g(()=>[a("div",Ar,[a("div",Hr,[i(ue,{class:"AffixImg",affixid:w.row.affixes[0],border:!0,tooltip:!0},null,8,["affixid"]),w.row.keystone_level>=4?(o(),K(ue,{key:0,class:"AffixImg",border:!0,affixid:w.row.affixes[1],tooltip:!0},null,8,["affixid"])):F("",!0),w.row.keystone_level>=7?(o(),K(ue,{key:1,class:"AffixImg",border:!0,affixid:w.row.affixes[2],tooltip:!0},null,8,["affixid"])):F("",!0),w.row.keystone_level>=10?(o(),K(ue,{key:2,class:"AffixImg",border:!0,affixid:w.row.affixes[3],tooltip:!0},null,8,["affixid"])):F("",!0)])])]),_:2},1032,["props"]),i(B,{key:"score",props:w},{default:g(()=>[q(p(Math.round(w.row.score*100)/100),1)]),_:2},1032,["props"])]),_:2},1032,["props"]),w.expand?(o(),K(_e,{key:0,class:"hideHover dungeoonDetails",props:w},{default:g(()=>[i(B,{colspan:"100%"},{default:g(()=>[a("div",null,[Br,i(De,{class:"background",id:w.row.keystonrun_id},null,8,["id"]),Dr]),a("div",Fr,[i(ke,{rows:I.value[w.row.zone.id],columns:h.value,dark:"","card-class":"background HeaderFont","table-class":"HeaderFont","table-header-class":"HeaderFont",pagination:n.value,"row-key":"keystonrun_id"},{body:g(z=>[i(_e,{props:z},{default:g(()=>[i(B,{key:"view",props:z},{default:g(()=>[i(xe,{dense:"",round:"",flat:"",icon:"visibility",onClick:ee=>z.expand=!z.expand},null,8,["onClick"]),S(z.row)?(o(),k("i",qr,"favorite")):F("",!0)]),_:2},1032,["props"]),i(B,{key:"complete_timestamp",props:z},{default:g(()=>[a("div",jr,[q(p(Q(z.row.time.completed_timestamp))+" ",1),i(ve,null,{default:g(()=>[q(p(ce(z.row.time.completed_timestamp)),1)]),_:2},1024)])]),_:2},1032,["props"]),i(B,{key:"lvl",props:z},{default:g(()=>[a("div",Pr,[a("div",null,p(z.row.keystone_level),1),a("div",null,[a("div",Lr,[(o(!0),k(X,null,ae(V(z.row),(ee,re)=>(o(),k("i",{key:re,class:"starIcon material-icons"},"star"))),128))])])])]),_:2},1032,["props"]),i(B,{key:"clear_time",props:z},{default:g(()=>[q(p(L(z.row.time.clear_time)),1)]),_:2},1032,["props"]),i(B,{key:"affixes",props:z},{default:g(()=>[a("div",Mr,[a("div",Or,[i(ue,{class:"AffixImg",affixid:z.row.affixes[0],border:!0,tooltip:!0},null,8,["affixid"]),z.row.keystone_level>=4?(o(),K(ue,{key:0,class:"AffixImg",border:!0,affixid:z.row.affixes[1],tooltip:!0},null,8,["affixid"])):F("",!0),z.row.keystone_level>=7?(o(),K(ue,{key:1,class:"AffixImg",border:!0,affixid:z.row.affixes[2],tooltip:!0},null,8,["affixid"])):F("",!0),z.row.keystone_level>=10?(o(),K(ue,{key:2,class:"AffixImg",border:!0,affixid:z.row.affixes[3],tooltip:!0},null,8,["affixid"])):F("",!0)])])]),_:2},1032,["props"]),i(B,{key:"score",props:z},{default:g(()=>[q(p(Math.round(z.row.score*100)/100),1)]),_:2},1032,["props"])]),_:2},1032,["props"]),z.expand?(o(),K(_e,{key:0,class:"hideHover",props:z},{default:g(()=>[i(B,{class:"hideHover",colspan:"100%"},{default:g(()=>[i(De,{class:"keystoneView",id:z.row.keystonrun_id},null,8,["id"])]),_:2},1024)]),_:2},1032,["props"])):F("",!0)]),_:2},1032,["rows","columns","pagination"])]),Kr]),_:2},1024)]),_:2},1032,["props"])):F("",!0)]),_:1},8,["rows","columns","grid","bordered","flat","pagination","row-key"])]))}});const Er=a("br",null,null,-1),Ur=a("br",null,null,-1),Gr={class:"flex justify-around"},Qr=a("br",null,null,-1),Vr=a("br",null,null,-1),Wr=a("br",null,null,-1),Yr=a("br",null,null,-1),Jr=a("br",null,null,-1),Xr={class:"flex justify-around"},Zr=a("br",null,null,-1),el=a("br",null,null,-1),tl=a("br",null,null,-1),al={key:1},sl=a("br",null,null,-1),rl=a("br",null,null,-1),ll=a("br",null,null,-1),nl=a("br",null,null,-1),il=a("br",null,null,-1),ol=a("br",null,null,-1),dl={key:2,class:"flex justify-center full-width"},cl=ne({__name:"PlayerView",props:{data:{type:Object,required:!0},region:{type:String,required:!0},realm:{type:String,required:!0},player:{type:String,required:!0},compact:{type:Boolean,default:!1},periode:{type:Object,required:!0}},setup(e){const l=e,{data:t,region:_,realm:s,player:r,compact:n,periode:h}=de(l),d=E(t.value.details),I=y=>{d.value=y,console.log("updated",y)};return(y,$)=>(o(),k("div",null,[b(h)?(o(),K(Ft,{key:0,periode:b(h),runs:b(t).run_data.runs,data:d.value},{default:g(({score:C,runs:f,raidProgress:x})=>{var m,S;return[i(Ht,{matches:b(t).otherMatches},null,8,["matches"]),i(Xt,{data:d.value,backupData:b(t).run_data,fields:{Raid:`${x==null?void 0:x.name}: ${x==null?void 0:x.value}`,Score:Math.round(b(t).run_data.score),"M+ Runs":b(t).run_data.runs.length+"x",Ilvl:(m=d.value)==null?void 0:m.equipped_item_level}},null,8,["data","backupData","fields"]),i(we,{dark:""}),d.value?(o(),k(X,{key:0},[Er,d.value?(o(),K(sa,{key:0,spec:d.value.active_spec,talents:d.value.talents},null,8,["spec","talents"])):F("",!0),Ur,a("div",Gr,[i(ur,{onUpdate:I,character:b(t).run_data,compact:b(n),details:d.value},null,8,["character","compact","details"])]),Qr,d.value&&x?(o(),K(Ja,{key:1,details:d.value},null,8,["details"])):F("",!0),Vr,d.value?(o(),K(ws,{key:2,details:d.value},null,8,["details"])):F("",!0),Wr,d.value?(o(),K(Ds,{key:3,details:d.value},null,8,["details"])):F("",!0),Yr,d.value?(o(),K(Ns,{key:4,details:d.value},null,8,["details"])):F("",!0),Jr],64)):F("",!0),b(t).run_data.runs.length>0?(o(),k(X,{key:1},[a("div",Xr,[i(tr,{runs:b(t).run_data.runs},null,8,["runs"])]),Zr,i(Nr,{runs:b(t).run_data.runs},null,8,["runs"]),el,i(us,{region:(S=b(_))!=null?S:b(t).run_data.region,runs:b(t).run_data.runs,mainPlayerId:b(t).run_data.player_id},null,8,["region","runs","mainPlayerId"]),tl,b(t).run_data.renames&&b(t).run_data.renames.length!=0?(o(),K(Cr,{key:0,renames:b(t).run_data.renames},null,8,["renames"])):F("",!0),b(t).run_data.renames&&b(t).run_data.renames.length!=0?(o(),k("br",al)):F("",!0),i(ba,{runs:b(t).run_data.runs},null,8,["runs"]),sl,i(Ta,{runs:b(t).run_data.runs},null,8,["runs"]),rl,i(fa,{runs:b(t).run_data.runs},null,8,["runs"]),ll,nl,i(gr,{runs:b(t).run_data.runs},null,8,["runs"]),il,ol],64)):(o(),k("h5",dl,"No run data for this selected season"))]}),_:1},8,["periode","runs","data"])):F("",!0)]))}});const et=e=>(ie("data-v-56e97394"),e=e(),oe(),e),ul={id:"LookupMain",class:"HeaderFont"},_l={class:"flex full-width justify-end"},fl=et(()=>a("br",null,null,-1)),hl=et(()=>a("br",null,null,-1)),vl={key:0,class:"flex full-width justify-center"},ml=ne({__name:"player",setup(e){const l=E(null),t=Qe(),_=O(()=>t.currentRoute.value.params.region),s=O(()=>t.currentRoute.value.params.realm),r=O(()=>t.currentRoute.value.params.name);return(n,h)=>{var d,I;return o(),k("div",ul,[a("div",_l,[i(bt,{id:"PeriodeSelectorcomp",region:b(_),modelValue:l.value,"onUpdate:modelValue":h[0]||(h[0]=y=>l.value=y)},null,8,["region","modelValue"]),fl,hl]),i(Ct,{name:b(r),realm:b(s),region:b(_),season:(I=(d=l.value)==null?void 0:d.season)==null?void 0:I.id},{default:g(({characterData:y,loading:$,error:C})=>[$&&!C&&!y?(o(),k("div",vl,[i(Be,{size:"100px",color:"primary"})])):C?(o(),k(X,{key:1},[q("error:"+p(C),1)],64)):!$&&!C&&y?(o(),K(cl,{key:2,data:y,player:b(r),realm:b(s),region:b(_),periode:l.value},null,8,["data","player","realm","region","periode"])):F("",!0)]),_:1},8,["name","realm","region","season"])])}}});var Al=Z(ml,[["__scopeId","data-v-56e97394"]]);export{Al as default};
