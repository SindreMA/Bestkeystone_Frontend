import{d as ne,B as de,c as O,r as E,u as he,K as Qe,w as fe,o as ge,l as Se,a as Ce,_ as Z,k as b,h as o,i as x,F as X,C as ae,m as q,t as p,p as i,q as g,af as Fe,aA as He,j as a,z as F,v as ie,x as oe,S as se,N as Ve,g as be,Q as Ye,ae as ve,n as K,ad as we,M as me,O as le,L as qe,ab as rt,ac as xe,ag as Be,az as lt,de as nt,D as We,$ as it,H as J,a$ as ot,E as dt,G as ct,cp as ut,J as _t,a7 as ft,ao as ht,df as vt,T as Ne,aI as Ee,aG as mt,d9 as gt,aa as Ue,bk as Je,bg as yt,e as pt}from"./index.d11fe415.js";import{P as bt}from"./PeriodeSelector.b7843ba6.js";import{T as kt,k as De}from"./keystoneView.f368ea24.js";import{Q as _e,a as D}from"./QTr.a8711b58.js";import{Q as ke}from"./QTable.4edb768e.js";import{a as ue}from"./index.b967c5e1.js";import"./linq.12a21919.js";import{r as xt}from"./Role.7037081e.js";import{n as $t}from"./numeral.04df9e7f.js";import{Q as wt}from"./QCheckbox.383fd197.js";import{a as St}from"./vue3-apexcharts.common.8478d377.js";import"./use-cache.b0833c75.js";import"./QInput.a9805111.js";import"./QMarkupTable.d0e5140e.js";const Ct=ne({__name:"PlayerFetcher",props:{realm:{type:String},name:{type:String},season:{type:Number},region:{type:String}},setup(e){const l=e,{realm:t,name:h,season:s,region:r}=de(l),n=O(()=>T.currentRoute.value.params.key),f=E(null),d=E(null),A=E(null),w=he().state.data,T=Qe(),m=()=>{var v=w.apiUrl;const $=T.currentRoute.value.path.includes("blizz");if(($?!n.value:!r.value||!t.value||!h.value)||!s.value)return null;let C=$?`${v}/Player/full/blizzard/${n.value}?season=${s.value}`:`${v}/Player/full?character=${h.value}&realm=${t.value}&region=${r.value}&season=${s.value}`;Ce.get(C).then(B=>{B.data&&(f.value=B.data)}).catch(B=>{d.value=B}).finally(()=>{A.value=!1})},k=()=>{f.value=null,d.value=null,A.value=!0,m()};return fe([h,t,r,s,n],()=>{k()}),ge(()=>{k()}),(v,$)=>Se(v.$slots,"default",{characterData:f.value,loading:A.value,error:d.value})}});const Tt=e=>(ie("data-v-ac101c24"),e=e(),oe(),e),zt={key:0,class:"MatchContainer"},It=Tt(()=>a("div",null,"There are multiple matches for this character path",-1)),Rt=["href"],At=ne({__name:"OtherMatches",props:{matches:{type:Array,required:!0}},setup(e){const l=e,{matches:t}=de(l),s=he().state.data,r=O(()=>s.Classes),n=O(()=>s.Specs);return(f,d)=>b(t).length>0?(o(),x("div",zt,[It,(o(!0),x(X,null,ae(b(t),(A,y)=>(o(),x("div",{key:y,class:"matchItem flex wrap"},[q(" ["+p(A.player.blizzardId)+"] ",1),i(Fe,{_class:A.player.class},{default:g(()=>{var w,T;return[q(p(A.player.name)+", "+p((w=b(n).find(m=>m.id==A.lastSeenSpec))==null?void 0:w.name)+" "+p((T=b(r).find(m=>m.id==A.player.class))==null?void 0:T.name)+", ",1)]}),_:2},1032,["_class"]),q(" last seen "+p(b(He).utc(A.lastRun.completedTimestamp).local().fromNow())+" - ",1),a("a",{href:`/lookup/player/blizzardId/${A.player.blizzardId}`},"View character",8,Rt)]))),128))])):F("",!0)}});var Ht=Z(At,[["__scopeId","data-v-ac101c24"]]);const Bt={props:["runs","periode","data"],methods:{shortName(e){var l="";for(let t=0;t<e.split(" ").length;t++){const h=e.split(" ")[t];h.toLowerCase()!=="the"&&(l+=h.charAt(0))}return l}},computed:{filterdRuns(){var e=[];for(let l=0;l<this.runs.length;l++){const t=this.runs[l];(this.periode.start==null||this.periode.end==null||t.time.completed_timestamp>this.periode.start*1e3&&t.time.completed_timestamp<this.periode.end*1e3)&&e.push(t)}return e},raidProgress(){if(!!this.data){var e=this.data.encounters,l=e[e.length-1];if(!!l){var t=l==null?void 0:l.raids[(l==null?void 0:l.raids.length)-1];if(!!t){var h=se._sortBy(t.difficulties,r=>r.difficulty.order).reverse()[0];if(!!h){var s=this.shortName(t.raid.name);return{value:`${h.bosses.length}/${t.raid.bosses.length} ${this.shortName(h.difficulty.name)}`,name:s}}}}}},PlayerScore(){var e=se.groupBy(this.filterdRuns,h=>h.zone.id),l=0;for(const h in e)if(e.hasOwnProperty(h)){const s=e[h];var t=null;for(let r=0;r<s.length;r++){const n=s[r];(t==null||t.score<n.score)&&(t=n)}l+=t.score}return l}}};function Dt(e,l,t,h,s,r){return o(),x("div",null,[Se(e.$slots,"default",{score:r.PlayerScore,raidProgress:r.raidProgress,runs:r.filterdRuns})])}var Ft=Z(Bt,[["render",Dt]]);const qt={props:["faction"],computed:{computedColor(){if(this.faction)return this.faction.toLowerCase().charAt(0)==="a"?"#027be3":"#b30000"}}};function jt(e,l,t,h,s,r){return o(),x("div",{style:Ve(`color: ${r.computedColor};`)},[Se(e.$slots,"default")],4)}var Pt=Z(qt,[["render",jt]]);const Lt={class:"flex justify-between"},Mt={class:"flex"},Ot={class:"self-center capitalize"},Kt={class:"HeaderSize3"},Nt={key:0},Et=a("br",null,null,-1),Ut={class:"flex"},Gt=["href"],Qt=["src"],Vt={class:"flex items-end"},Yt={key:0,class:"flex items-end field"},Wt={class:"value self-end"},Jt=a("br",{style:{"margin-right":"60px"}},null,-1),Xt=ne({__name:"Header",props:{data:{type:Object},fields:{},backupData:{type:Object}},setup(e){const l=e,{data:t,fields:h}=de(l),s=O(()=>{var A,y,w,T,m,k;const r=(y=(A=t.value)==null?void 0:A.region)!=null?y:l.backupData.region,n=(T=(w=t.value)==null?void 0:w.realm)!=null?T:l.backupData.realm,f=(k=(m=t.value)==null?void 0:m.name)!=null?k:l.backupData.name;var d=[{image:se.FormatToCloudinary("external/wow.png"),description:"View on armory",link:`https://www.worldofwarcraft.com/en-${r.replace("eu","gb")}/character/${n}/${f}`},{image:se.FormatToCloudinary("external/rio.png"),description:"View on Raider.IO",link:`https://raider.io/characters/${r}/${n}/${f}`},{image:se.FormatToCloudinary("external/warcraftlogs.png"),description:"View on Warcraftlogs.com",link:`https://www.warcraftlogs.com/character/${r}/${n}/${f}`},{image:se.FormatToCloudinary("external/raidbots.png"),description:"Simulate on Raidbots.com",link:`https://www.raidbots.com/simbot/quick?region=${r}&realm=${n}&name=${f}`}];return d});return(r,n)=>{var d,A,y,w,T,m,k,v,$,C,B;const f=be("router-link");return o(),x("div",Lt,[a("div",null,[a("div",Mt,[i(Ye,{class:"avatarImage",src:(A=(d=b(t))==null?void 0:d.avatar_url)!=null?A:"https://res.cloudinary.com/djpcbbeqx/image/upload/v1664310107/external/wow.png"},null,8,["src"]),a("div",Ot,[a("div",Kt,[i(Fe,{_class:(y=b(t))==null?void 0:y.character_class},{default:g(()=>{var U,N;return[q(p((N=(U=b(t))==null?void 0:U.name)!=null?N:e.backupData.name),1)]}),_:1},8,["_class"])]),(w=b(t))!=null&&w.guild?(o(),x("div",Nt,[i(f,{to:`/lookup/guild/${(T=b(t))==null?void 0:T.guild.region}/${(m=b(t))==null?void 0:m.guild.realm}/${(k=b(t))==null?void 0:k.guild.name}`},{default:g(()=>{var U;return[i(Pt,{faction:(U=b(t))==null?void 0:U.guild.faction},{default:g(()=>{var N;return[q(p((N=b(t))==null?void 0:N.guild.name),1)]}),_:1},8,["faction"])]}),_:1},8,["to"])])):F("",!0),a("div",null,"["+p(($=(v=b(t))==null?void 0:v.region)!=null?$:e.backupData.region)+"] "+p((B=(C=b(t))==null?void 0:C.realm)!=null?B:e.backupData.realm),1)])]),Et,a("div",Ut,[(o(!0),x(X,null,ae(b(s),(U,N)=>(o(),x("div",{class:"externalLinks",key:N},[a("a",{href:U.link,target:"_blank"},[a("img",{class:"iconLink",src:U.image},null,8,Qt),i(ve,null,{default:g(()=>[q(p(U.description),1)]),_:2},1024)],8,Gt)]))),128))])]),a("div",Vt,[(o(!0),x(X,null,ae(b(h),(U,N,ce)=>(o(),x("div",{key:N,class:"flex items-end"},[U!=null&&U!="undefined: undefined"?(o(),x("div",Yt,[a("div",Wt,p(U),1),q(" "+p(N),1)])):F("",!0),ce!==3?(o(),K(we,{key:1,class:"self-end",style:{height:"40px"},vertical:"",dark:""})):F("",!0)]))),128)),Jt])])}}});const Zt={style:{width:"100%"}},ea={class:"flex justify-around talents"},ta={class:"flex"},aa=["onClick"],sa=ne({__name:"TalentLine",props:{talents:{type:Array,required:!0},spec:{type:Number}},setup(e){const l=e,{talents:t,spec:h}=de(l),s=E(h.value),n=he().state.data,f=O(()=>n.Specs),d=w=>{if(f.value)for(let T=0;T<f.value.length;T++){const m=f.value[T];if(m.id==w)return m}},A=O(()=>{var w=t.value.find(T=>{var m;return((m=T.filter(k=>k.specId)[0])==null?void 0:m.specId)===s.value});return w.filter(T=>T.isActive===void 0||T.isActive)}),y=O(()=>Object.keys(t.value.reduce((w,T)=>{var m;return{...w,[`${(m=T[0])==null?void 0:m.specId}`]:T}},{})).map(w=>parseInt(w)));return ge(()=>{h.value&&(s.value=h.value)}),(w,T)=>(o(),x("div",Zt,[a("div",ea,[(o(!0),x(X,null,ae(b(A),m=>(o(),K(kt,{talent:m,key:`${m.id}`},null,8,["talent"]))),128))]),i(we,{dark:""}),a("div",ta,[(o(!0),x(X,null,ae(b(y),(m,k)=>{var v;return o(),x("div",{key:m,class:"flex"},[a("div",{onClick:$=>s.value=m,class:me(["pointer clickHover specButton text-center",`${s.value==m&&"specButtonSelected"}`])},p((v=d(m))==null?void 0:v.name),11,aa),k!=b(y).length-1?(o(),K(we,{key:0,vertical:"",dark:""})):F("",!0)])}),128))])]))}});const ra=e=>(ie("data-v-0c09e0cf"),e=e(),oe(),e),la={id:"Box"},na=ra(()=>a("div",{id:"Header",class:"HeaderSize4"}," Dungeon statistics ",-1)),ia={id:"Container"},oa={class:"flex dungeonItem"},da={key:1,class:"material-icons"},ca={key:2},ua={key:3},_a=ne({__name:"DungeonOverview",props:{runs:{type:Array}},setup(e){const l=e,{runs:t}=de(l),s=he().state.data,r=O(()=>s.Dungeons),n=w=>r.value.find(T=>T.keystone_id==w),f=E([]),d=E({rowsPerPage:20,page:1,sortBy:"dungeon"}),A=E([{name:"dungeon",label:"Dungeon",field:w=>w.dungeon=="All"?"All":w.item.zone.name,sortable:!0},{name:"highest_lvl",label:"Highest level",field:"highest_lvl",sortable:!0},{name:"highest_score",label:"Highest score",field:"highest_score",sortable:!0},{name:"avg_time",label:"Average time",field:"avg_time",sortable:!0,format:w=>`${le.duration(w).format("hh:mm:ss")}`},{name:"total_time",label:"Total time",field:"total_time",sortable:!0,format:w=>`${le.duration(w).format("hh:mm:ss")}`},{name:"runs",label:"Runs",field:"runs",sortable:!0},{name:"ontime_rate",label:"Success rate",field:"ontime_rate",sortable:!0,format:w=>`${w}%`}]),y=O(()=>{var w=[...t.value],T=se.groupBy(w,B=>B.zone.id);T.All=w;var m=[];for(const B in T)if(T.hasOwnProperty(B)){const U=T[B];var k=0,v=0,$=0,C={item:U[0],dungeon:B,highest_lvl:0,highest_score:0,avg_lvl:0,avg_score:0,avg_time:0,total_time:0,runs:0,ontime_rate:0};for(const N of U)C.runs++,C.highest_lvl<N.keystone_level&&(C.highest_lvl=N.keystone_level),C.highest_score<N.score&&(C.highest_score=Math.floor(N.score)),k+=N.score,v+=N.keystone_level,C.total_time+=N.time.clear_time,N.time.ontime&&$++;C.avg_time=C.total_time/C.runs,C.total_time=C.total_time,C.avg_lvl=Math.floor(v/C.runs),C.avg_score=Math.floor(k/C.runs),C.ontime_rate=Math.floor($/C.runs*100),m.push(C)}return m});return fe(t,()=>{f.value=y.value}),ge(()=>{f.value=y.value}),(w,T)=>(o(),x("div",la,[na,a("div",ia,[i(ke,{"rows-per-page-options":[],"card-class":"HeaderFont","table-class":"HeaderFont","table-header-class":"HeaderFont",dark:"",dense:"",rows:f.value,columns:A.value,pagination:d.value,"row-key":"dungeon"},{body:g(m=>[i(_e,{props:m,class:"text-center"},{default:g(()=>[i(D,{key:"dungeon"},{default:g(()=>{var k,v,$;return[a("div",oa,[m.row.dungeon!="All"?(o(),K(qe,{key:0,url:($=(v=n((k=m.row.item.zone)==null?void 0:k.id))==null?void 0:v.imageurl)!=null?$:`backgrounds/dungeons/${m.row.item.zone.slug}.png`},{default:g(({link:C})=>[i(Ye,{class:"tableIcon",src:C},null,8,["src"])]),_:2},1032,["url"])):(o(),x("i",da,"menu")),m.row.dungeon!="All"?(o(),x("div",ca,p(m.row.item.zone.name),1)):(o(),x("div",ua,"All"))])]}),_:2},1024),i(D,{key:"highest_lvl"},{default:g(()=>[q(p(m.row.highest_lvl),1)]),_:2},1024),i(D,{key:"highest_score"},{default:g(()=>[q(p(m.row.highest_score),1)]),_:2},1024),i(D,{key:"avg_time"},{default:g(()=>[q(p(`${b(le).duration(m.row.avg_time).format("hh:mm:ss")}`),1)]),_:2},1024),i(D,{key:"total_time"},{default:g(()=>[q(p(`${b(le).duration(m.row.total_time).format("hh:mm:ss")}`),1)]),_:2},1024),i(D,{key:"runs"},{default:g(()=>[q(p(m.row.runs),1)]),_:2},1024),i(D,{key:"intime_rate"},{default:g(()=>[q(p(m.row.ontime_rate)+"% ",1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])]))}});var fa=Z(_a,[["__scopeId","data-v-0c09e0cf"]]);const ha=e=>(ie("data-v-3747ef22"),e=e(),oe(),e),va={id:"Box"},ma=ha(()=>a("div",{id:"Header",class:"HeaderSize4"}," Affix statistics ",-1)),ga={id:"Container"},ya={class:"flex tableIconContainer"},pa=ne({__name:"AffixOverview",props:{runs:{type:Array},from:{},to:{}},setup(e){const l=e,{runs:t,from:h,to:s}=de(l);fe(t,()=>{r.value=T.value}),ge(()=>{r.value=T.value});const r=E([]),n=E({rowsPerPage:20,page:1,sortBy:"affix"}),f=E([{name:"affix",label:"Affix",field:m=>{var k;return(k=m.affix)==null?void 0:k.name},sortable:!0,align:"center"},{name:"highest_lvl",label:"Highest level",field:"highest_lvl",sortable:!0,align:"center"},{name:"highest_score",label:"Highest score",field:"highest_score",sortable:!0,align:"center"},{name:"total_time",label:"Total time",field:"total_time",align:"center",sortable:!0,format:m=>`${le.duration(m).format("hh:mm:ss")}`},{name:"runs",label:"Runs",field:"runs",sortable:!0,align:"center"},{name:"ontime_rate",label:"Success rate",field:"ontime_rate",sortable:!0,format:m=>`${m}%`,align:"center"}]),d=m=>{for(let k=0;k<w.value.length;k++){const v=w.value[k];if((v==null?void 0:v.id)===m)return v}},y=he().state.data,w=O(()=>y.Affixes),T=O(()=>{var m=[...t.value],k=[];for(let V=0;V<m.length;V++){const P=m[V];var v=P.affixes,$=4;P.keystone_level<=3?$=1:P.keystone_level<=6?$=2:P.keystone_level<=9?$=3:P.keystone_level>=10&&($=4);for(let _=0;_<$;_++){const z=v[_];var C=!1;for(let S=0;S<k.length;S++){const R=k[S];R.affix===z&&(R.runs.push(P),C=!0)}if(!C){var B={affix:z,runs:[P]};k.push(B)}}}var U=[];for(let V=0;V<k.length;V++){const P=k[V];var N=0,ce=0,Q=0,L={affix:d(P.affix),highest_lvl:0,highest_score:0,avg_lvl:0,avg_score:0,avg_time:0,total_time:0,runs:0,ontime_rate:0};for(const _ of P.runs)L.runs++,L.highest_lvl<_.keystone_level&&(L.highest_lvl=_.keystone_level),L.highest_score<_.score&&(L.highest_score=Math.floor(_.score)),N+=_.score,ce+=_.keystone_level,L.total_time+=_.time.clear_time,_.time.ontime&&Q++;L.avg_time=L.total_time/L.runs,L.total_time=L.total_time,L.avg_lvl=Math.floor(ce/L.runs),L.avg_score=Math.floor(N/L.runs),L.ontime_rate=Math.floor(Q/L.runs*100),U.push(L)}return U});return(m,k)=>(o(),x("div",va,[ma,a("div",ga,[i(ke,{"rows-per-page-options":[],"card-class":"HeaderFont","table-class":"HeaderFont","table-header-class":"HeaderFont",dark:"",dense:"",rows:r.value,columns:f.value,pagination:n.value,"row-key":"affix"},{body:g(v=>[i(_e,{props:v,class:"text-center"},{default:g(()=>[i(D,{key:"affix"},{default:g(()=>{var $,C;return[a("div",ya,[i(ue,{affixid:($=v.row.affix)==null?void 0:$.id,size:"13px",border:!0,class:"tableIcon"},null,8,["affixid"]),a("div",null,p((C=v.row.affix)==null?void 0:C.name),1)])]}),_:2},1024),i(D,{key:"highest_lvl"},{default:g(()=>[q(p(v.row.highest_lvl),1)]),_:2},1024),i(D,{key:"highest_score"},{default:g(()=>[q(p(v.row.highest_score),1)]),_:2},1024),i(D,{key:"total_time"},{default:g(()=>[q(p(`${b(le).duration(v.row.total_time).format("hh:mm:ss")}`),1)]),_:2},1024),i(D,{key:"runs"},{default:g(()=>[q(p(v.row.runs),1)]),_:2},1024),i(D,{key:"intime_rate"},{default:g(()=>[q(p(v.row.ontime_rate)+"% ",1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])]))}});var ba=Z(pa,[["__scopeId","data-v-3747ef22"]]);const ka=e=>(ie("data-v-797132bb"),e=e(),oe(),e),xa={id:"Box"},$a=ka(()=>a("div",{id:"Header",class:"HeaderSize4"}," Affix combonations statistics ",-1)),wa={id:"Container"},Sa={class:"flex justify-around"},Ca=ne({__name:"AffixSetOverview",props:{runs:{type:Array},from:{},to:{}},setup(e){const l=e,{runs:t,from:h,to:s}=de(l),r=E([]),n=E({rowsPerPage:20,page:1,sortBy:"affix"}),f=E([{name:"affix",label:"Affix",field:m=>{var k;return(k=m.affix)==null?void 0:k.affix},sortable:!0,align:"center"},{name:"highest_lvl",label:"Highest level",field:"highest_lvl",sortable:!0,align:"center"},{name:"highest_score",label:"Highest score",field:"highest_score",sortable:!0,align:"center"},{name:"total_time",label:"Total time",field:"total_time",sortable:!0,format:m=>`${le.duration(m).format("hh:mm:ss")}`,align:"center"},{name:"runs",label:"Runs",field:"runs",sortable:!0,align:"center"},{name:"ontime_rate",label:"Success rate",field:"ontime_rate",sortable:!0,format:m=>`${m}%`,align:"center"}]),d=m=>{for(let k=0;k<w.value.length;k++){const v=w.value[k];if((v==null?void 0:v.id)===m)return v}},y=he().state.data,w=O(()=>y.Affixes),T=O(()=>{var m=[...t.value],k=[];for(let L=0;L<m.length;L++){const V=m[L];var v=V.affixes.map(P=>{var _;return(_=d(P))==null?void 0:_.name}).join(" "),$=!1;for(let P=0;P<k.length;P++){const _=k[P];(_==null?void 0:_.affix)===v&&(_==null||_.runs.push(V),$=!0)}if(!$){var C={affix:v,runs:[V],affixes:V.affixes.map(P=>d(P))};k.push(C)}}var B=[];for(let L=0;L<k.length;L++){const V=k[L];var U=0,N=0,ce=0,Q={affix:V,highest_lvl:0,highest_score:0,avg_lvl:0,avg_score:0,avg_time:0,total_time:0,runs:0,ontime_rate:0};for(const P of V.runs)Q.runs++,Q.highest_lvl<P.keystone_level&&(Q.highest_lvl=P.keystone_level),Q.highest_score<P.score&&(Q.highest_score=Math.floor(P.score)),U+=P.score,N+=P.keystone_level,Q.total_time+=P.time.clear_time,P.time.ontime&&ce++;Q.avg_time=Q.total_time/Q.runs,Q.total_time=Q.total_time,Q.avg_lvl=Math.floor(N/Q.runs),Q.avg_score=Math.floor(U/Q.runs),Q.ontime_rate=Math.floor(ce/Q.runs*100),B.push(Q)}return B});return fe(t,()=>{r.value=T.value}),ge(()=>{r.value=T.value}),(m,k)=>(o(),x("div",xa,[$a,a("div",wa,[i(ke,{"rows-per-page-options":[],"card-class":"HeaderFont","table-class":"HeaderFont","table-header-class":"HeaderFont",dark:"",dense:"",rows:r.value,columns:f.value,pagination:n.value,"row-key":"affixCombo"},{body:g(v=>[i(_e,{props:v,class:"text-center"},{default:g(()=>[i(D,{key:"affix"},{default:g(()=>{var $;return[a("div",Sa,[(o(!0),x(X,null,ae(($=v.row.affix)==null?void 0:$.affixes,(C,B)=>(o(),x("div",{class:"flex affixItem",key:B},[i(ue,{affixid:C==null?void 0:C.id,border:!0,size:"13px",class:"tableIcon"},null,8,["affixid"]),a("div",null,p(C==null?void 0:C.name),1)]))),128))])]}),_:2},1024),i(D,{key:"highest_lvl"},{default:g(()=>[q(p(v.row.highest_lvl),1)]),_:2},1024),i(D,{key:"highest_score"},{default:g(()=>[q(p(v.row.highest_score),1)]),_:2},1024),i(D,{key:"total_time"},{default:g(()=>[q(p(`${b(le).duration(v.row.total_time).format("hh:mm:ss")}`),1)]),_:2},1024),i(D,{key:"runs"},{default:g(()=>[q(p(v.row.runs),1)]),_:2},1024),i(D,{key:"intime_rate"},{default:g(()=>[q(p(v.row.ontime_rate)+"% ",1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])])]))}});var Ta=Z(Ca,[["__scopeId","data-v-797132bb"]]);const za={props:["details"],watch:{progressedRaids(){this.choseLatestRaid()}},created(){this.choseLatestRaid()},watch:{details(){this.choseLatestRaid()}},data(){return{SelectedRaid:null,expanded:null}},methods:{choseLatestRaid(){this.SelectedRaid=this.progressedRaids[this.progressedRaids.length-1]},isOdd(e){return e%2===1},GetTotalKills(e){if(e){var l=0;for(let t=0;t<e.length;t++)l+=e[t].kills;return l}else return 0},GetProgress(e){return`${e.bosses.length}/${this.SelectedRaid.raid.bosses.length}${e.difficulty.name[0]} `}},computed:{size(){return{width:this.$q.screen.width,height:this.$q.screen.height}},progressedRaids(){if(this.details){var e=[];return this.details.encounters.forEach(l=>{var t;(t=l==null?void 0:l.raids)==null||t.forEach(h=>{e.push(h)})}),e}}}},Te=e=>(ie("data-v-729e9e30"),e=e(),oe(),e),Ia={key:0,class:"MainWindow"},Ra={key:0,class:"row raidItemHeader"},Aa=Te(()=>a("div",{class:"raidItemName"},null,-1)),Ha=Te(()=>a("div",{class:"raidItemProgress text-center"},"Progress",-1)),Ba=Te(()=>a("div",{class:"raidItemKills text-center"},"Kills",-1)),Da=[Aa,Ha,Ba],Fa={class:"fullwidth",id:"RaidDivContainer"},qa={class:"fullwidth",id:"RaidDivHeader"},ja={key:0},Pa={key:0,class:"flex justify-between"},La={class:"row"},Ma={key:0},Oa={key:1},Ka={style:{"margin-top":"5px"}},Na={class:"flex",style:{}},Ea={style:{"margin-right":"15px"}},Ua={style:{"margin-right":"27px"}},Ga={key:1},Qa={class:"raidItemName"},Va=Te(()=>a("div",{class:"raidItemProgress text-center"},null,-1)),Ya={class:"raidItemKills text-center"};function Wa(e,l,t,h,s,r){return t.details?(o(),x("div",Ia,[s.SelectedRaid?(o(),x("div",Ra,Da)):F("",!0),a("div",Fa,[a("div",qa,[i(rt,{dark:"",modelValue:s.SelectedRaid,"onUpdate:modelValue":l[0]||(l[0]=n=>s.SelectedRaid=n),dense:"",options:r.progressedRaids,"option-label":n=>n===null&&n.raid===null?"Null value":n.raid.name,"hide-dropdown-icon":"","display-value":s.SelectedRaid?s.SelectedRaid.raid.name:"","popup-content-class":"searchResultsBox"},null,8,["modelValue","options","option-label","display-value"])]),s.SelectedRaid?(o(),x("div",ja,[(o(!0),x(X,null,ae(s.SelectedRaid.difficulties,(n,f)=>(o(),x("div",{key:f,class:me({minorlighter:!r.isOdd(f)})},[n.difficulty.name!="Raid Finder"?(o(),x("div",Pa,[a("div",La,[s.expanded!=n.difficulty.id?(o(),x("div",Ma,[i(xe,{dense:"",flat:"",color:"grey",icon:"add",onClick:d=>s.expanded=n.difficulty.id},null,8,["onClick"])])):(o(),x("div",Oa,[i(xe,{dense:"",flat:"",color:"grey",icon:"remove",onClick:l[1]||(l[1]=d=>s.expanded=s.expanded==null)})])),a("div",Ka,p(n.difficulty.name),1)]),a("div",Na,[a("div",Ea,p(r.GetProgress(n)),1),a("div",Ua,p(r.GetTotalKills(n.bosses)),1)])])):F("",!0),s.expanded==n.difficulty.id?(o(),x("div",Ga,[(o(!0),x(X,null,ae(n.bosses,(d,A)=>(o(),x("div",{class:me(["row bossItemContainer",{minorlighter:!r.isOdd(A)}]),key:A},[a("div",Qa,p(d.boss.name),1),Va,a("div",Ya,p(d.kills),1)],2))),128))])):F("",!0)],2))),128))])):F("",!0)])])):F("",!0)}var Ja=Z(za,[["render",Wa],["__scopeId","data-v-729e9e30"]]);const Xa={props:["title"],data(){return{}}},Za={id:"Box"},es={id:"Header",class:"HeaderSize4"},ts={id:"Container"};function as(e,l,t,h,s,r){return o(),x("div",Za,[a("div",es,p(t.title),1),a("div",ts,[Se(e.$slots,"default",{class:"TakeAll"},void 0,!0)])])}var Xe=Z(Xa,[["render",as],["__scopeId","data-v-c357c466"]]);const ss={props:["runs","mainPlayerId","region"],components:{container:Xe,roleIcon:xt,classTextColor:Fe},data(){return{data:null,paginationControl:{rowsPerPage:6,page:1,descending:!0,sortBy:"sharedRunsAmount"},Columns:[{name:"role",label:"Role",align:"left"},{name:"name",label:"Name",align:"left"},{name:"sharedRunsAmount",label:"Shared Runs",field:"sharedRunsAmount",align:"right"},{name:"sharedScore",label:"Team Score",sortable:!0,field:"sharedScore",align:"right"},{name:"score",label:"Score in current season",sortable:!0,field:"score",align:"right"}]}},methods:{fetchDetails(e){var l=this.$store.state.data.apiUrl,t=this,h=se._sortBy(this.data,e.sortBy);e.descending&&(h=h.reverse());var s=(e.page-1)*e.rowsPerPage,r=se.from(h,s);for(let n=0;n<e.rowsPerPage;n++){const f=r[n];f&&(f.fetching=!0,Ce.get(`${l}/Player/blizzard_id?id=${f.id}&region=${this.region}`).then(d=>{f.name=d.data.name,f.realm=d.data.realm,f.score=d.data.score,f.details=d.data,f.fetching=!1,t.data=[...t.data]}).catch(d=>{f.detailsFailed=!0,f.fetching=!1}))}},getSpec(e,l){var t=[];e.forEach(s=>{s.players.forEach(r=>{if(r.id==l){var n=t.filter(f=>f.spec==r.spec);n.length!=0?n[0].count++:t.push({spec:r.spec,count:1})}})});var h=t.sort().reverse()[0].spec;return h},reload(){setTimeout(()=>{location.reload(!0)},250)}},computed:{activeRows(){var e=this.$refs.table;if(e){var l=e.computedRows;if(l)return l}return null},playedWithPlayers(){var e=[];if(this.runs){var l=[];this.runs.forEach(s=>{s.players.forEach(r=>{if(r.id!=this.mainPlayerId){var n={...s};n.distinctId=r.id,l.push(n)}})});var t=se.groupBy(l,s=>s.distinctId);for(const s in t)if(t.hasOwnProperty(s)){const r=t[s];var h={id:s,spec:this.getSpec(r,s),sharedRunsAmount:r.length+s*1e-11,sharedScore:se.GetScore(r)+s*1e-11};e.push(h)}}return e}},watch:{runs(){this.data=this.playedWithPlayers}},created(){this.data=this.playedWithPlayers}},rs=e=>(ie("data-v-ed0fe6ee"),e=e(),oe(),e),ls={class:"flex justify-end"},ns={class:"flex justify-end"},is={class:"flex justify-end"},os={class:"flex justify-end"},ds=rs(()=>a("div",{class:"flex justify-end"}," 0 ",-1));function cs(e,l,t,h,s,r){const n=be("roleIcon"),f=be("classTextColor"),d=be("router-link"),A=be("container");return s.data.length>0?(o(),K(A,{key:0,title:"Keystone friends"},{default:g(()=>[s.data?(o(),K(ke,{key:0,ref:"table",rows:s.data,columns:s.Columns,pagination:s.paginationControl,"row-key":"id",dense:"","rows-per-page-options":[],dark:"",color:"amber","onUpdate:pagination":l[1]||(l[1]=y=>r.fetchDetails(y))},{body:g(y=>[i(_e,{props:y},{default:g(()=>{var w,T,m,k;return[i(D,{key:"role"},{default:g(()=>[i(n,{tooltip:!0,class:"rowIcon",spec:y.row.spec},null,8,["spec"])]),_:2},1024),!y.row.name&&!((w=y.row)!=null&&w.fetching)?(o(),K(D,{key:"name"},{default:g(()=>[i(f,{spec:y.row.spec},{default:g(()=>[q(p(y.row.id),1)]),_:2},1032,["spec"])]),_:2},1024)):y.row.name?(o(),K(D,{key:"name"},{default:g(()=>[i(f,{spec:y.row.spec},{default:g(()=>[i(d,{onClick:l[0]||(l[0]=v=>r.reload()),to:`/lookup/player/${t.region}/${y.row.realm}/${y.row.name}`},{default:g(()=>[q(p(y.row.name),1)]),_:2},1032,["to"])]),_:2},1032,["spec"])]),_:2},1024)):(T=y.row)!=null&&T.fetching?(o(),K(D,{key:"name"},{default:g(()=>[i(Be,{color:"yellow",size:"15px"}),i(ve,null,{default:g(()=>[q("fetching info from api")]),_:1})]),_:1})):F("",!0),i(D,{key:"sharedruns"},{default:g(()=>[a("div",ls,p(Math.round(y.row.sharedRunsAmount)),1)]),_:2},1024),i(D,{key:"teamscore"},{default:g(()=>[a("div",ns,p(Math.round(y.row.sharedScore*10)/10),1)]),_:2},1024),y.row.score!=null&&!((m=y.row)!=null&&m.fetching)?(o(),K(D,{key:"score"},{default:g(()=>[a("div",is,p(Math.round(y.row.score*10)/10),1)]),_:2},1024)):(k=y.row)!=null&&k.fetching?(o(),K(D,{key:"score"},{default:g(()=>[a("div",os,[i(Be,{color:"yellow",size:"15px"}),i(ve,null,{default:g(()=>[q("fetching info from api")]),_:1})])]),_:1})):(o(),K(D,{key:"score"},{default:g(()=>[ds]),_:1}))]}),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])):F("",!0)]),_:1})):F("",!0)}var us=Z(ss,[["render",cs],["__scopeId","data-v-ed0fe6ee"]]);const _s=e=>(ie("data-v-32fd520e"),e=e(),oe(),e),fs={key:0},hs={id:"gearDivContainer"},vs={id:"gearDivHeader",class:"flex justify-between"},ms=_s(()=>a("div",{class:"HeaderSize4"},"Gear",-1)),gs={id:"gearContent"},ys={class:"flex"},ps=["id"],bs={class:"ilvlBox"},ks=["href","data-wowhead"],xs=["src"],$s=ne({__name:"GearInfo",props:{details:{type:Object}},setup(e){const l=e,{details:t}=de(l),h=s=>{var r=`item=${s.id}&ilvl=${s.item_level}`;if(s.azerite_powers&&(r+=`&azerite-powers=${s.azerite_powers.map(f=>f.id).join(":")}`),s.enchantment&&(r+=`&ench=${s.enchantment}`),s.socket&&(r+=`&gems=${s.socket}`),s.azerite){var n=[];s.azerite.slot_0_id!=null&&s.azerite.slot_0_id!=null&&n.push(s.azerite.slot_0_id),s.azerite.slot_1_id!=null&&s.azerite.slot_1_id!=null&&n.push(s.azerite.slot_1_id),s.azerite.slot_2_id!=null&&s.azerite.slot_2_id!=null&&n.push(s.azerite.slot_2_id),s.azerite.slot_3_id!=null&&s.azerite.slot_3_id!=null&&n.push(s.azerite.slot_3_id),r+=`&azerite-essence-powers=${n.join(":")}`}return s.transmog&&(r+=`&transmog=${s.transmog}`),s.bonus_list!==null&&s.bonus_list!==void 0&&(r+=`&bonus=${s.bonus_list.replace(/,/g,":")}`),r};return O(()=>{if(t.value){var s=Object.keys(t.value.items).map(function(r){if(r!="averageItemLevelEquipped"&&r!="averageItemLevel"){var n=t.value.items[r];return n.slot=r,n}}).filter(r=>r);return s}}),(s,r)=>b(t)?(o(),x("div",fs,[a("div",hs,[a("div",vs,[ms,a("div",null,p(b(t).equipped_item_level)+"/"+p(b(t).average_item_level),1)]),a("div",gs,[a("div",ys,[(o(!0),x(X,null,ae(b(t).equipment,(n,f)=>{var d;return o(),x("div",{class:"item",key:f},[a("div",{id:"gearSlot"+n.slot,class:"text-center"},[a("div",bs,p(n.item_level),1),a("a",{href:`http://www.wowhead.com/item=${n.id}`,"data-wowhead":h(n)},[i(qe,{url:(d=n.iconUrl)!=null?d:"https://wow.zamimg.com/images/wow/icons/medium/"+n.icon+".jpg",size:"35px"},{default:g(({link:A})=>[a("img",{class:"itemIcon",src:A},null,8,xs)]),_:2},1032,["url"])],8,ks)],8,ps)])}),128))])])])])):F("",!0)}});var ws=Z($s,[["__scopeId","data-v-32fd520e"]]);const{capitalize:Ge}=nt,Ss={props:["details","compact"],data(){return{width:1200}},computed:{powerType(){return Ge(this.details.statistics.power_type)},options(){return{stroke:{show:!0,curve:"smooth",lineCap:"butt",colors:void 0,width:2,dashArray:0},legend:{show:!1,foreColor:"#414141"},colors:["#CCAC00","#2e2e2e"],labels:["Gained","Missing"],dataLabels:{enabled:!1},plotOptions:{pie:{donut:{},size:75}}}}},methods:{onResize(e){this.width=e.width},capitalize(e){return Ge(e)},short(e,l){return $t(e).format(l)}}},Ze=e=>(ie("data-v-35c284af"),e=e(),oe(),e),Cs=Ze(()=>a("div",{id:"Header",class:"HeaderSize4"},"Stats",-1)),Ts={id:"Container",class:"flex justify-around"},zs={class:"infoField"},Is=Ze(()=>a("br",null,null,-1)),Rs={style:{width:"100%"},class:"flex justify-around"},As={style:{width:"100%"},class:"flex justify-around"},Hs={class:"text-center statField"};function Bs(e,l,t,h,s,r){return t.details?(o(),x("div",{key:0,class:me({cWidth:t.compact,rncWidth:!t.compact}),id:"Box"},[Cs,a("div",Ts,[i(lt,{onResize:r.onResize},null,8,["onResize"]),a("div",zs,[Is,a("div",Rs,[(o(!0),x(X,null,ae(t.details.statistics.stats.filter(n=>n.effective!=0),(n,f)=>(o(),x("div",{class:"text-center statField",key:f},[a("div",null,p(r.capitalize(n.name)),1),a("div",null,p(r.short(n.effective,"0.0 a")),1)]))),128))]),a("div",As,[(o(!0),x(X,null,ae(t.details.statistics.stats.filter(n=>n.rating!=0&&n.rating_bonus!=0&&n.value!=0&&!n.name.includes("ranged")&&!n.name.includes("spell")),(n,f)=>(o(),x("div",{class:"text-center statField",key:f},[a("div",null,p(r.capitalize(n.name.replace("melee_crit","Critical Strike").replace("melee_haste","Haste"))),1),a("div",null,p(r.short(n.rating,"0.0 a")),1)]))),128)),a("div",Hs,[a("div",null,p(r.capitalize("Versatility")),1),a("div",null,p(r.short(t.details.statistics.versatility,"0.0 a")),1)])])])])],2)):F("",!0)}var Ds=Z(Ss,[["render",Bs],["__scopeId","data-v-35c284af"]]),Fs=We({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:l,emit:t}){let h=!1,s,r,n=null,f=null,d,A;function y(){s&&s(),s=null,h=!1,n!==null&&(clearTimeout(n),n=null),f!==null&&(clearTimeout(f),f=null),r!==void 0&&r.removeEventListener("transitionend",d),d=null}function w(v,$,C){$!==void 0&&(v.style.height=`${$}px`),v.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,h=!0,s=C}function T(v,$){v.style.overflowY=null,v.style.height=null,v.style.transition=null,y(),$!==A&&t($)}function m(v,$){let C=0;r=v,h===!0?(y(),C=v.offsetHeight===v.scrollHeight?0:void 0):(A="hide",v.style.overflowY="hidden"),w(v,C,$),n=setTimeout(()=>{n=null,v.style.height=`${v.scrollHeight}px`,d=B=>{f=null,(Object(B)!==B||B.target===v)&&T(v,"show")},v.addEventListener("transitionend",d),f=setTimeout(d,e.duration*1.1)},100)}function k(v,$){let C;r=v,h===!0?y():(A="show",v.style.overflowY="hidden",C=v.scrollHeight),w(v,C,$),n=setTimeout(()=>{n=null,v.style.height=0,d=B=>{f=null,(Object(B)!==B||B.target===v)&&T(v,"hide")},v.addEventListener("transitionend",d),f=setTimeout(d,e.duration*1.1)},100)}return it(()=>{h===!0&&y()}),()=>J(ot,{css:!1,appear:e.appear,onEnter:m,onLeave:k},l.default)}});const qs=["none","strict","leaf","leaf-filtered"];var js=We({name:"QTree",props:{...dt,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>qs.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:l,emit:t}){const{proxy:h}=_t(),{$q:s}=h,r=ct(e,s),n=E({}),f=E(e.ticked||[]),d=E(e.expanded||[]);let A={};ut(()=>{A={}});const y=O(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(r.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),w=O(()=>e.selected!==void 0),T=O(()=>e.icon||s.iconSet.tree.icon),m=O(()=>e.controlColor||e.color),k=O(()=>e.textColor!==void 0?` text-${e.textColor}`:""),v=O(()=>{const u=e.selectedColor||e.color;return u?` text-${u}`:""}),$=O(()=>e.filterMethod!==void 0?e.filterMethod:(u,I)=>{const c=I.toLowerCase();return u[e.labelKey]&&u[e.labelKey].toLowerCase().indexOf(c)>-1}),C=O(()=>{const u={},I=(c,j)=>{const H=c.tickStrategy||(j?j.tickStrategy:e.tickStrategy),G=c[e.nodeKey],Y=c[e.childrenKey]&&c[e.childrenKey].length>0,ye=c.disabled!==!0&&w.value===!0&&c.selectable!==!1,te=c.disabled!==!0&&c.expandable!==!1,at=H!=="none",$e=H==="strict",Oe=H==="leaf-filtered",Re=H==="leaf"||H==="leaf-filtered";let Ae=c.disabled!==!0&&c.tickable!==!1;Re===!0&&Ae===!0&&j&&j.tickable!==!0&&(Ae=!1);let pe=c.lazy;pe===!0&&n.value[G]!==void 0&&Array.isArray(c[e.childrenKey])===!0&&(pe=n.value[G]);const M={key:G,parent:j,isParent:Y,lazy:pe,disabled:c.disabled,link:c.disabled!==!0&&(ye===!0||te===!0&&(Y===!0||pe===!0)),children:[],matchesFilter:e.filter?$.value(c,e.filter):!0,selected:G===e.selected&&ye===!0,selectable:ye,expanded:Y===!0?d.value.includes(G):!1,expandable:te,noTick:c.noTick===!0||$e!==!0&&pe&&pe!=="loaded",tickable:Ae,tickStrategy:H,hasTicking:at,strictTicking:$e,leafFilteredTicking:Oe,leafTicking:Re,ticked:$e===!0?f.value.includes(G):Y===!0?!1:f.value.includes(G)};if(u[G]=M,Y===!0&&(M.children=c[e.childrenKey].map(W=>I(W,M)),e.filter&&(M.matchesFilter!==!0?M.matchesFilter=M.children.some(W=>W.matchesFilter):M.noTick!==!0&&M.disabled!==!0&&M.tickable===!0&&Oe===!0&&M.children.every(W=>W.matchesFilter!==!0||W.noTick===!0||W.tickable!==!0)===!0&&(M.tickable=!1)),M.matchesFilter===!0&&(M.noTick!==!0&&$e!==!0&&M.children.every(W=>W.noTick)===!0&&(M.noTick=!0),Re))){if(M.ticked=!1,M.indeterminate=M.children.some(W=>W.indeterminate===!0),M.tickable=M.tickable===!0&&M.children.some(W=>W.tickable),M.indeterminate!==!0){const W=M.children.reduce((Ke,st)=>st.ticked===!0?Ke+1:Ke,0);W===M.children.length?M.ticked=!0:W>0&&(M.indeterminate=!0)}M.indeterminate===!0&&(M.indeterminateNextState=M.children.every(W=>W.tickable!==!0||W.ticked!==!0))}return M};return e.nodes.forEach(c=>I(c,null)),u});fe(()=>e.ticked,u=>{f.value=u}),fe(()=>e.expanded,u=>{d.value=u});function B(u){const I=[].reduce,c=(j,H)=>{if(j||!H)return j;if(Array.isArray(H)===!0)return I.call(Object(H),c,j);if(H[e.nodeKey]===u)return H;if(H[e.childrenKey])return c(null,H[e.childrenKey])};return c(null,e.nodes)}function U(){return f.value.map(u=>B(u))}function N(){return d.value.map(u=>B(u))}function ce(u){return u&&C.value[u]?C.value[u].expanded:!1}function Q(){e.expanded!==void 0?t("update:expanded",[]):d.value=[]}function L(){const u=d.value,I=c=>{c[e.childrenKey]&&c[e.childrenKey].length>0&&c.expandable!==!1&&c.disabled!==!0&&(u.push(c[e.nodeKey]),c[e.childrenKey].forEach(I))};e.nodes.forEach(I),e.expanded!==void 0?t("update:expanded",u):d.value=u}function V(u,I,c=B(u),j=C.value[u]){if(j.lazy&&j.lazy!=="loaded"){if(j.lazy==="loading")return;n.value[u]="loading",Array.isArray(c[e.childrenKey])!==!0&&(c[e.childrenKey]=[]),t("lazyLoad",{node:c,key:u,done:H=>{n.value[u]="loaded",c[e.childrenKey]=Array.isArray(H)===!0?H:[],ft(()=>{const G=C.value[u];G&&G.isParent===!0&&P(u,!0)})},fail:()=>{delete n.value[u],c[e.childrenKey].length===0&&delete c[e.childrenKey]}})}else j.isParent===!0&&j.expandable===!0&&P(u,I)}function P(u,I){let c=d.value;const j=e.expanded!==void 0;if(j===!0&&(c=c.slice()),I){if(e.accordion&&C.value[u]){const H=[];C.value[u].parent?C.value[u].parent.children.forEach(G=>{G.key!==u&&G.expandable===!0&&H.push(G.key)}):e.nodes.forEach(G=>{const Y=G[e.nodeKey];Y!==u&&H.push(Y)}),H.length>0&&(c=c.filter(G=>H.includes(G)===!1))}c=c.concat([u]).filter((H,G,Y)=>Y.indexOf(H)===G)}else c=c.filter(H=>H!==u);j===!0?t("update:expanded",c):d.value=c}function _(u){return u&&C.value[u]?C.value[u].ticked:!1}function z(u,I){let c=f.value;const j=e.ticked!==void 0;j===!0&&(c=c.slice()),I?c=c.concat(u).filter((H,G,Y)=>Y.indexOf(H)===G):c=c.filter(H=>u.includes(H)===!1),j===!0&&t("update:ticked",c)}function S(u,I,c){const j={tree:h,node:u,key:c,color:e.color,dark:r.value};return Ue(j,"expanded",()=>I.expanded,H=>{H!==I.expanded&&V(c,H)}),Ue(j,"ticked",()=>I.ticked,H=>{H!==I.ticked&&z([c],H)}),j}function R(u){return(e.filter?u.filter(I=>C.value[I[e.nodeKey]].matchesFilter):u).map(I=>Pe(I))}function ee(u){if(u.icon!==void 0)return J(Ne,{class:"q-tree__icon q-mr-sm",name:u.icon,color:u.iconColor});const I=u.img||u.avatar;if(I)return J("img",{class:`q-tree__${u.img?"img":"avatar"} q-mr-sm`,src:I})}function re(){t("afterShow")}function ze(){t("afterHide")}function Pe(u){const I=u[e.nodeKey],c=C.value[I],j=u.header&&l[`header-${u.header}`]||l["default-header"],H=c.isParent===!0?R(u[e.childrenKey]):[],G=H.length>0||c.lazy&&c.lazy!=="loaded";let Y=u.body&&l[`body-${u.body}`]||l["default-body"];const ye=j!==void 0||Y!==void 0?S(u,c,I):null;return Y!==void 0&&(Y=J("div",{class:"q-tree__node-body relative-position"},[J("div",{class:k.value},[Y(ye)])])),J("div",{key:I,class:`q-tree__node relative-position q-tree__node--${G===!0?"parent":"child"}`},[J("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(c.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(c.selected===!0?" q-tree__node--selected":"")+(c.disabled===!0?" q-tree__node--disabled":""),tabindex:c.link===!0?0:-1,onClick:te=>{Me(u,c,te)},onKeypress(te){ht(te)!==!0&&(te.keyCode===13?Me(u,c,te,!0):te.keyCode===32&&Ie(u,c,te,!0))}},[J("div",{class:"q-focus-helper",tabindex:-1,ref:te=>{A[c.key]=te}}),c.lazy==="loading"?J(vt,{class:"q-tree__spinner",color:m.value}):G===!0?J(Ne,{class:"q-tree__arrow"+(c.expanded===!0?" q-tree__arrow--rotate":""),name:T.value,onClick(te){Ie(u,c,te)}}):null,c.hasTicking===!0&&c.noTick!==!0?J(wt,{class:"q-tree__tickbox",modelValue:c.indeterminate===!0?null:c.ticked,color:m.value,dark:r.value,dense:!0,keepColor:!0,disable:c.tickable!==!0,onKeydown:Ee,"onUpdate:modelValue":te=>{tt(c,te)}}):null,J("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(c.selected===!0?v.value:k.value)},[j?j(ye):[ee(u),J("div",u[e.labelKey])]])]),G===!0?e.noTransition===!0?J("div",{class:"q-tree__node-collapsible"+k.value,key:`${I}__q`},[Y,J("div",{class:"q-tree__children"+(c.disabled===!0?" q-tree__node--disabled":"")},c.expanded?H:null)]):J(Fs,{duration:e.duration,onShow:re,onHide:ze},()=>mt(J("div",{class:"q-tree__node-collapsible"+k.value,key:`${I}__q`},[Y,J("div",{class:"q-tree__children"+(c.disabled===!0?" q-tree__node--disabled":"")},H)]),[[gt,c.expanded]])):Y])}function Le(u){const I=A[u];I&&I.focus()}function Me(u,I,c,j){j!==!0&&I.selectable!==!1&&Le(I.key),w.value&&I.selectable?e.noSelectionUnset===!1?t("update:selected",I.key!==e.selected?I.key:null):I.key!==e.selected&&t("update:selected",I.key===void 0?null:I.key):Ie(u,I,c,j),typeof u.handler=="function"&&u.handler(u)}function Ie(u,I,c,j){c!==void 0&&Ee(c),j!==!0&&I.selectable!==!1&&Le(I.key),V(I.key,!I.expanded,u,I)}function tt(u,I){if(u.indeterminate===!0&&(I=u.indeterminateNextState),u.strictTicking)z([u.key],I);else if(u.leafTicking){const c=[],j=H=>{H.isParent?(I!==!0&&H.noTick!==!0&&H.tickable===!0&&c.push(H.key),H.leafTicking===!0&&H.children.forEach(j)):H.noTick!==!0&&H.tickable===!0&&(H.leafFilteredTicking!==!0||H.matchesFilter===!0)&&c.push(H.key)};j(u),z(c,I)}}return e.defaultExpandAll===!0&&L(),Object.assign(h,{getNodeByKey:B,getTickedNodes:U,getExpandedNodes:N,isExpanded:ce,collapseAll:Q,expandAll:L,setExpanded:V,isTicked:_,setTicked:z}),()=>{const u=R(e.nodes);return J("div",{class:y.value},u.length===0?e.filter?e.noResultsLabel||s.lang.tree.noResults:e.noNodesLabel||s.lang.tree.noNodes:u)}}});const Ps={props:["details","compact"],methods:{change(e){var l={label:e.name,id:e.id},t=[];if(e.statistics)for(let s=0;s<e.statistics.length;s++){const r=e.statistics[s];var h={label:`${r.name}: ${r.quantity}`};t.push(h)}if(e.sub_categories)for(let s=0;s<e.sub_categories.length;s++){const r=e.sub_categories[s];t.push(this.change(r))}return l.children=t,l}},computed:{nodes(){var e=JSON.parse(this.details.achievements_statistics).categories,l={id:1,name:"Statistics",sub_categories:e},t=this.change(l);return t.children}}},Ls=e=>(ie("data-v-677c2941"),e=e(),oe(),e),Ms=Ls(()=>a("div",{id:"Header",class:"HeaderSize4"},"Statistics",-1)),Os={id:"Container"};function Ks(e,l,t,h,s,r){return t.details?(o(),x("div",{key:0,class:me({cWidth:t.compact,rncWidth:!t.compact}),id:"Box"},[Ms,a("div",Os,[i(Je,{style:{height:"255px"}},{default:g(()=>[i(js,{dark:"",nodes:r.nodes,"node-key":"label"},null,8,["nodes"])]),_:1})])],2)):F("",!0)}var Ns=Z(Ps,[["render",Ks],["__scopeId","data-v-677c2941"]]);const Es=e=>(ie("data-v-825e266c"),e=e(),oe(),e),Us={key:0,id:"Box"},Gs=Es(()=>a("div",{id:"Header",class:"HeaderSize4"},"Recent keystone runs",-1)),Qs={id:"Container"},Vs={class:"placeLeft flex"},Ys={class:"flex justify-end relative"},Ws=["onClick"],Js={class:"chestContainer flex justify-start"},Xs={class:"placeRight"},Zs={class:"background HeaderFont viewItem"},er=ne({__name:"recentRunsBox",props:{runs:{type:Array}},setup(e){const l=e,{runs:t}=de(l),h=O(()=>[...t.value].sort((d,A)=>d.time.completed_timestamp-A.time.completed_timestamp).reverse()),s=d=>{var A=d.time.map_time-d.time.clear_time;return d.time.clear_time<=d.time.map_time*.6?3:d.time.clear_time<=d.time.map_time*.8?2:A>=0?1:0},r=d=>d%2===1,n=d=>He(d).fromNow(),f=d=>He(d).format("HH:mm DD.MM.YYYY");return(d,A)=>b(t)?(o(),x("div",Us,[Gs,i(Je,{style:{height:"158px"}},{default:g(()=>[a("div",Qs,[(o(!0),x(X,null,ae(b(h),(y,w)=>(o(),x("div",{key:w},[w<20?(o(),x("div",{key:0,class:me(["runRow",{dark:r(w)}])},[a("div",Vs,[a("div",Ys,[a("div",{class:"Pointer",onClick:T=>d.$refs[`run${y.keystonrun_id}`][0].show()},p(y.zone.name)+" +"+p(y.keystone_level),9,Ws),a("div",null,[a("div",Js,[(o(!0),x(X,null,ae(s(y),(T,m)=>(o(),x("i",{key:m,class:"starIcon material-icons"},"star"))),128))])])])]),a("div",Xs,[q(p(n(y.time.completed_timestamp))+" ",1),i(ve,null,{default:g(()=>[q(p(f(y.time.completed_timestamp)),1)]),_:2},1024)])],2)):F("",!0),i(yt,{ref_for:!0,ref:`run${y.keystonrun_id}`},{default:g(()=>[a("div",Zs,[i(De,{id:y.keystonrun_id},null,8,["id"])])]),_:2},1536)]))),128))])]),_:1})])):F("",!0)}});var tr=Z(er,[["__scopeId","data-v-825e266c"]]);const ar={props:["details","character"],data(){return{btnText:"Update",interval:null}},methods:{normalizeTime(e){return e*1e3},startTimer(e){var l=this;this.interval=setInterval(()=>{var h;var t=l.normalizeTime((h=l.details)==null?void 0:h.created)+36e5-new Date().getTime();e(le.duration(t).format("hh:mm:ss")),t<=0&&(e(null),clearInterval(l.interval))},1e3)},niceTimestamp(e){return e?le.utc(e).local().fromNow():"Unknown"},fetchDetails(){this.btnText="Updating";var e=this.character,l=this,t=this.$store.state.data.apiUrl;Ce.get(`${t}/Player/new_details?character=${e.name}&realm=${e.realm}&region=${e.region}&checkblizzard=true`).then(h=>{if(h.data){if(h.data.character=e,!h.data.fetchTimestamp){var s=new Date().getTime();h.data.fetchTimestamp=s}l.startTimer(r=>{r?l.btnText=`Can be updated in ${r}`:l.btnText="Update"}),this.$emit("update",h.data)}}).catch(h=>{})}},computed:{now(){return new Date().getTime()},disAllowUpdate(){return this.btnText!=="Update"}},created(){var t;var e=this,l=this.normalizeTime((t=e.details)==null?void 0:t.created)+36e5-new Date().getTime();l>0&&this.startTimer(h=>{h?e.btnText=`Can be updated in ${h}`:e.btnText="Update"})}},je=e=>(ie("data-v-028ab615"),e=e(),oe(),e),sr={key:0,id:"Box"},rr=je(()=>a("div",{id:"Header",class:"HeaderSize4"},"Update",-1)),lr=je(()=>a("br",null,null,-1)),nr={id:"Container",class:"flex justify-around"},ir={class:"boxRow1"},or={class:"boxRow1"},dr=je(()=>a("br",null,null,-1));function cr(e,l,t,h,s,r){var n,f;return t.details?(o(),x("div",sr,[rr,lr,a("div",nr,[a("div",ir,"Last logout: "+p(r.niceTimestamp((n=t.details)==null?void 0:n.last_login_timestamp)),1),a("div",or,"Last update on site: "+p(r.niceTimestamp(r.normalizeTime(((f=t.details)==null?void 0:f.created)-5))),1),i(xe,{disable:r.disAllowUpdate,onClick:l[0]||(l[0]=d=>r.fetchDetails()),class:"boxRow1",label:s.btnText,icon:"update",outline:""},null,8,["disable","label"])]),dr])):F("",!0)}var ur=Z(ar,[["render",cr],["__scopeId","data-v-028ab615"]]);const _r=e=>(ie("data-v-55654612"),e=e(),oe(),e),fr={key:0,class:"Header HeaderSize4"},hr={id:"chart",class:"HeaderFont"},vr=_r(()=>a("div",null,"These setting can be changed in the settings wheel up in the right",-1)),mr=ne({__name:"ChestsChart",props:{runs:{type:Array,required:!0}},setup(e){const l=e,{runs:t}=de(l),h=E([]),s=E({chart:{foreColor:"#a1a1a1"},plotOptions:{bar:{barHeight:"100%",distributed:!0,horizontal:!0}},colors:["#DAA520","#980DE9","#228B22","#696969"],xaxis:{categories:["Three Chest","Two Chest","One Chest","Not in time"]},yaxis:{labels:{show:!1}},dataLabels:{enabled:!0,textAnchor:"start",style:{colors:["#fff"]},formatter:function(y,w){return w.w.globals.labels[w.dataPointIndex]+":  "+y},offsetX:0,dropShadow:{enabled:!0}},tooltip:{theme:"dark",x:{show:!1},y:{title:{formatter:function(){return""}}}}}),n=he().state.data,f=O(()=>n.settings),d=O(()=>n.SelectedPeriode),A=()=>{if(t.value){var y=t.value.filter($=>$.time.clear_time<$.time.map_time*.6),w=t.value.filter($=>$.time.clear_time<$.time.map_time*.8&&$.time.clear_time>$.time.map_time*.6),T=t.value.filter($=>$.time.clear_time<$.time.map_time&&$.time.clear_time>$.time.map_time*.8),m=t.value.filter($=>$.time.clear_time>$.time.map_time);h.value=[{data:[y.length,w.length,T.length,m.length]}]}else{var k=f.value,v=n.apiUrl;Ce.get(`${v}/Stats/ChestStats?periode=${d.value}&min_level=${k.min_keystonelevel}&amount=${k.max_runs}&limitToLowestDungeon=${k.limitbylowestdungeon}`).then($=>{h.value=[{data:$.data}]}).catch($=>{console.log($)})}};return fe([t,d],()=>{A()}),ge(()=>{A()}),(y,w)=>(o(),x("div",{class:me([{Box:b(t)},"relative"])},[b(t)?(o(),x("div",fr,"Chest statistics")):F("",!0),a("div",hr,[i(b(St),{type:"bar",height:"350",options:s.value,series:h.value},null,8,["options","series"]),b(t)?F("",!0):(o(),K(ve,{key:0},{default:g(()=>[a("div",null,"This data is generated from the top "+p(b(f).max_runs)+" runs from every dungeon, that are higher than level "+p(b(f).min_keystonelevel)+".",1),vr]),_:1}))])],2))}});var gr=Z(mr,[["__scopeId","data-v-55654612"]]);const yr={props:["renames"],components:{container:Xe},methods:{moment(e){return se.GetMoment(e)},timeFormatAgo(e){return this.moment(e).fromNow()},timeFormatDate(e){return this.moment(e)}},computed:{renamesLimited(){var e=se.take(this.renames,4);return e}}},pr={class:"container"},br={class:"flex justify-around"},kr={class:"marginTop"},xr={class:"marginTop"},$r=a("i",{class:"fs25 material-icons"},"arrow_right_alt",-1),wr={class:"marginTop"};function Sr(e,l,t,h,s,r){const n=be("container");return o(),K(n,{title:"Player Renames"},{default:g(()=>[(o(!0),x(X,null,ae(r.renamesLimited,(f,d)=>(o(),x("div",{key:d},[a("div",pr,[a("div",br,[a("div",kr,[q(p(r.timeFormatAgo(f.changed))+" ",1),i(ve,null,{default:g(()=>[q(p(r.timeFormatDate(f.changed)),1)]),_:2},1024)]),a("div",xr,p(f.old_name),1),$r,a("div",wr,p(f.new_name),1)])])]))),128))]),_:1})}var Cr=Z(yr,[["render",Sr]]);const Tr={class:"boxBorder"},zr=a("div",{class:"Header HeaderSize4"}," Top Dungeon Runs ",-1),Ir={class:"flex justify-end relative"},Rr={class:"chestContainer flex justify-start"},Ar={class:"flex justify-center"},Hr={class:"flex justify-start",style:{width:"140px"}},Br=a("br",null,null,-1),Dr=a("br",null,null,-1),Fr={class:"historyContainer background"},qr={key:0,class:"SelectedMarker material-icons"},jr={class:"text-center"},Pr={class:"flex justify-center relative"},Lr={class:"chestContainer flex justify-start"},Mr={class:"flex justify-center"},Or={class:"flex justify-start",style:{width:"140px"}},Kr=a("br",null,null,-1),Nr=ne({__name:"DungeonListv2",props:{runs:{},from:{},to:{}},setup(e){const l=e,{runs:t,from:h,to:s}=de(l);E([]),E(!1),E([]);const r=E({rowsPerPage:999,page:1,sortBy:"score",descending:!0}),n=E({rowsPerPage:10,page:1,sortBy:"complete_timestamp",descending:!0}),f=E([{name:"view",label:"View",align:"left"},{name:"complete_timestamp",field:_=>_.time.completed_timestamp,sortable:!0,sort:(_,z,S,R)=>S.time.completed_timestamp-R.time.completed_timestamp,label:"Completed",align:"center"},{name:"lvl",label:"Level",field:_=>_.keystone_level,sortable:!0,align:"center",sort:(_,z,S,R)=>S.keystone_level-R.keystone_level,format:(_,z)=>`${z.keystone_level}${C(z)}`},{name:"clear_time",label:"Time",field:_=>_.time.clear_time,sortable:!0,align:"center",sort:(_,z,S,R)=>S.time.clear_time-R.time.clear_time,format:(_,z)=>`${L(z.time.clear_time)}`},{name:"affixes",label:"Affixes",field:_=>_.affixes,sortable:!0,align:"center",sort:(_,z,S,R)=>S.reduce((ee,re)=>ee+re,0)-R.reduce((ee,re)=>ee+re,0),format:(_,z)=>`${[B(z.affixes[0]).name,B(z.affixes[1]).name,B(z.affixes[2]).name,B(z.affixes[3]).name].join(",")}`},{name:"score",label:"Score",field:_=>_.score,sortable:!0,align:"center",sort:(_,z,S,R)=>S.score-R.score,format:(_,z)=>`${Math.round(z.score*100)/100}`}]),d=E([{name:"view",label:"View",align:"left"},{name:"zone_name",label:"Dungeon",field:_=>_.zone.name,sortable:!0,align:"left"},{name:"level",label:"Level",field:_=>_.keystone_level,sortable:!0,align:"right",sort:(_,z,S,R)=>S.keystone_level-R.keystone_level,format:(_,z)=>`${z.keystone_level}${C(z)}`},{name:"time",label:"Time",field:_=>_.time.clear_time,sortable:!0,align:"right",sort:(_,z,S,R)=>S.time.clear_time-R.time.clear_time,format:(_,z)=>`${L(z.time.clear_time)}`},{name:"affixes",label:"Affixes",field:_=>_.affixes,sortable:!0,align:"center",sort:(_,z,S,R)=>S.reduce((ee,re)=>ee+re,0)-R.reduce((ee,re)=>ee+re,0),format:(_,z)=>`${[B(z.affixes[0]).name,B(z.affixes[1]).name,B(z.affixes[2]).name,B(z.affixes[3]).name].join(",")}`},{name:"score",label:"Score",field:_=>_.score,sortable:!0,align:"right",sort:(_,z,S,R)=>S.score-R.score,format:(_,z)=>`${Math.round(z.score*100)/100}`}]),A=E([]),y=E([]),T=he().state.data,m=O(()=>T.Dungeons),k=O(()=>T.Affixes),v=_=>m.value.find(z=>z.keystone_id==_),$=_=>{for(let z=0;z<y.value.length;z++)if(y.value[z].keystonrun_id===_.keystonrun_id)return!0;return!1},C=_=>{var z="";for(let S=0;S<V(_);S++)z+="*";return z},B=_=>{for(let z=0;z<k.value.length;z++){const S=k.value[z];if(S.id==_)return S}},U=()=>{A.value=se.groupBy(t.value,_=>_.zone.id),y.value=N(A.value)},N=_=>{var z=[];for(const S in _)if(_.hasOwnProperty(S)){const R=_[S];z.push(se._sortBy(R,"score").reverse()[0])}return z},ce=_=>le(_).format("hh:mm DD.MM.YYYY"),Q=_=>le(_).fromNow(),L=_=>le.duration(_).format("h:mm:ss"),V=_=>{var z=_.time.map_time-_.time.clear_time;return _.time.clear_time<=_.time.map_time*.6?3:_.time.clear_time<=_.time.map_time*.8?2:z>=0?1:0};fe(t,()=>{U()});const P=pt();return ge(()=>{U(),P.screen.setSizes({sm:300,lg:1e3,xl:2e3})}),(_,z)=>(o(),x("div",Tr,[zr,i(ke,{rows:y.value,columns:d.value,dark:"",grid:b(P).screen.width<710,bordered:b(P).screen.width<710,flat:b(P).screen.width<710,"card-class":"HeaderFont","table-class":"HeaderFont","table-header-class":"HeaderFont",pagination:r.value,"hide-bottom":"","row-key":S=>S.zone.id},{body:g(S=>[i(_e,{props:S},{default:g(()=>[i(D,{key:"view",props:S},{default:g(()=>{var R,ee,re;return[i(qe,{url:(re=(ee=v((R=S.row.zone)==null?void 0:R.id))==null?void 0:ee.imageurl)!=null?re:`backgrounds/dungeons/${S.row.zone.slug}.png`},{default:g(({link:ze})=>[i(xe,{style:Ve(`background-size: 150% 150%; background-image: url('${ze}');`),class:"btnBackground",dense:"",round:"",flat:"",icon:S.expand?"arrow_drop_up":"arrow_drop_down",onClick:Pe=>S.expand=!S.expand},null,8,["style","icon","onClick"])]),_:2},1032,["url"])]}),_:2},1032,["props"]),i(D,{key:"zone_name",props:S},{default:g(()=>[q(p(S.row.zone.name),1)]),_:2},1032,["props"]),i(D,{key:"level",props:S},{default:g(()=>[a("div",Ir,[a("div",null,p(S.row.keystone_level),1),a("div",null,[a("div",Rr,[(o(!0),x(X,null,ae(V(S.row),(R,ee)=>(o(),x("i",{key:ee,class:"starIcon material-icons"},"star"))),128))])])])]),_:2},1032,["props"]),i(D,{key:"time",props:S},{default:g(()=>[q(p(L(S.row.time.clear_time)),1)]),_:2},1032,["props"]),i(D,{key:"affixes",props:S},{default:g(()=>[a("div",Ar,[a("div",Hr,[i(ue,{class:"AffixImg",affixid:S.row.affixes[0],border:!0,tooltip:!0},null,8,["affixid"]),S.row.keystone_level>=4?(o(),K(ue,{key:0,class:"AffixImg",border:!0,affixid:S.row.affixes[1],tooltip:!0},null,8,["affixid"])):F("",!0),S.row.keystone_level>=7?(o(),K(ue,{key:1,class:"AffixImg",border:!0,affixid:S.row.affixes[2],tooltip:!0},null,8,["affixid"])):F("",!0),S.row.keystone_level>=10?(o(),K(ue,{key:2,class:"AffixImg",border:!0,affixid:S.row.affixes[3],tooltip:!0},null,8,["affixid"])):F("",!0)])])]),_:2},1032,["props"]),i(D,{key:"score",props:S},{default:g(()=>[q(p(Math.round(S.row.score*100)/100),1)]),_:2},1032,["props"])]),_:2},1032,["props"]),S.expand?(o(),K(_e,{key:0,class:"hideHover dungeoonDetails",props:S},{default:g(()=>[i(D,{colspan:"100%"},{default:g(()=>[a("div",null,[Br,i(De,{class:"background",id:S.row.keystonrun_id},null,8,["id"]),Dr]),a("div",Fr,[i(ke,{rows:A.value[S.row.zone.id],columns:f.value,dark:"","card-class":"background HeaderFont","table-class":"HeaderFont","table-header-class":"HeaderFont",pagination:n.value,"row-key":"keystonrun_id"},{body:g(R=>[i(_e,{props:R},{default:g(()=>[i(D,{key:"view",props:R},{default:g(()=>[i(xe,{dense:"",round:"",flat:"",icon:"visibility",onClick:ee=>R.expand=!R.expand},null,8,["onClick"]),$(R.row)?(o(),x("i",qr,"favorite")):F("",!0)]),_:2},1032,["props"]),i(D,{key:"complete_timestamp",props:R},{default:g(()=>[a("div",jr,[q(p(Q(R.row.time.completed_timestamp))+" ",1),i(ve,null,{default:g(()=>[q(p(ce(R.row.time.completed_timestamp)),1)]),_:2},1024)])]),_:2},1032,["props"]),i(D,{key:"lvl",props:R},{default:g(()=>[a("div",Pr,[a("div",null,p(R.row.keystone_level),1),a("div",null,[a("div",Lr,[(o(!0),x(X,null,ae(V(R.row),(ee,re)=>(o(),x("i",{key:re,class:"starIcon material-icons"},"star"))),128))])])])]),_:2},1032,["props"]),i(D,{key:"clear_time",props:R},{default:g(()=>[q(p(L(R.row.time.clear_time)),1)]),_:2},1032,["props"]),i(D,{key:"affixes",props:R},{default:g(()=>[a("div",Mr,[a("div",Or,[i(ue,{class:"AffixImg",affixid:R.row.affixes[0],border:!0,tooltip:!0},null,8,["affixid"]),R.row.keystone_level>=4?(o(),K(ue,{key:0,class:"AffixImg",border:!0,affixid:R.row.affixes[1],tooltip:!0},null,8,["affixid"])):F("",!0),R.row.keystone_level>=7?(o(),K(ue,{key:1,class:"AffixImg",border:!0,affixid:R.row.affixes[2],tooltip:!0},null,8,["affixid"])):F("",!0),R.row.keystone_level>=10?(o(),K(ue,{key:2,class:"AffixImg",border:!0,affixid:R.row.affixes[3],tooltip:!0},null,8,["affixid"])):F("",!0)])])]),_:2},1032,["props"]),i(D,{key:"score",props:R},{default:g(()=>[q(p(Math.round(R.row.score*100)/100),1)]),_:2},1032,["props"])]),_:2},1032,["props"]),R.expand?(o(),K(_e,{key:0,class:"hideHover",props:R},{default:g(()=>[i(D,{class:"hideHover",colspan:"100%"},{default:g(()=>[i(De,{class:"keystoneView",id:R.row.keystonrun_id},null,8,["id"])]),_:2},1024)]),_:2},1032,["props"])):F("",!0)]),_:2},1032,["rows","columns","pagination"])]),Kr]),_:2},1024)]),_:2},1032,["props"])):F("",!0)]),_:1},8,["rows","columns","grid","bordered","flat","pagination","row-key"])]))}});const Er=a("br",null,null,-1),Ur=a("br",null,null,-1),Gr={class:"flex justify-around"},Qr=a("br",null,null,-1),Vr=a("br",null,null,-1),Yr=a("br",null,null,-1),Wr=a("br",null,null,-1),Jr=a("br",null,null,-1),Xr={class:"flex justify-around"},Zr=a("br",null,null,-1),el=a("br",null,null,-1),tl=a("br",null,null,-1),al={key:1},sl=a("br",null,null,-1),rl=a("br",null,null,-1),ll=a("br",null,null,-1),nl=a("br",null,null,-1),il=a("br",null,null,-1),ol=a("br",null,null,-1),dl={key:2,class:"flex justify-center full-width"},cl=ne({__name:"PlayerView",props:{data:{type:Object,required:!0},region:{type:String,required:!0},realm:{type:String,required:!0},player:{type:String,required:!0},compact:{type:Boolean,default:!1},periode:{type:Object,required:!0}},setup(e){const l=e,{data:t,region:h,realm:s,player:r,compact:n,periode:f}=de(l),d=E(t.value.details),A=y=>{d.value=y,console.log("updated",y)};return(y,w)=>(o(),x("div",null,[b(f)?(o(),K(Ft,{key:0,periode:b(f),runs:b(t).run_data.runs,data:d.value},{default:g(({score:T,runs:m,raidProgress:k})=>{var v,$;return[i(Ht,{matches:b(t).otherMatches},null,8,["matches"]),i(Xt,{data:d.value,backupData:b(t).run_data,fields:{Raid:`${k==null?void 0:k.name}: ${k==null?void 0:k.value}`,Score:Math.round(b(t).run_data.score),"M+ Runs":b(t).run_data.runs.length+"x",Ilvl:(v=d.value)==null?void 0:v.equipped_item_level}},null,8,["data","backupData","fields"]),i(we,{dark:""}),d.value?(o(),x(X,{key:0},[Er,d.value?(o(),K(sa,{key:0,spec:d.value.active_spec,talents:d.value.talents},null,8,["spec","talents"])):F("",!0),Ur,a("div",Gr,[i(ur,{onUpdate:A,character:b(t).run_data,compact:b(n),details:d.value},null,8,["character","compact","details"])]),Qr,d.value&&k?(o(),K(Ja,{key:1,details:d.value},null,8,["details"])):F("",!0),Vr,d.value?(o(),K(ws,{key:2,details:d.value},null,8,["details"])):F("",!0),Yr,d.value?(o(),K(Ds,{key:3,details:d.value},null,8,["details"])):F("",!0),Wr,d.value?(o(),K(Ns,{key:4,details:d.value},null,8,["details"])):F("",!0),Jr],64)):F("",!0),b(t).run_data.runs.length>0?(o(),x(X,{key:1},[a("div",Xr,[i(tr,{runs:b(t).run_data.runs},null,8,["runs"])]),Zr,i(Nr,{runs:b(t).run_data.runs},null,8,["runs"]),el,i(us,{region:($=b(h))!=null?$:b(t).run_data.region,runs:b(t).run_data.runs,mainPlayerId:b(t).run_data.player_id},null,8,["region","runs","mainPlayerId"]),tl,b(t).run_data.renames&&b(t).run_data.renames.length!=0?(o(),K(Cr,{key:0,renames:b(t).run_data.renames},null,8,["renames"])):F("",!0),b(t).run_data.renames&&b(t).run_data.renames.length!=0?(o(),x("br",al)):F("",!0),i(ba,{runs:b(t).run_data.runs},null,8,["runs"]),sl,i(Ta,{runs:b(t).run_data.runs},null,8,["runs"]),rl,i(fa,{runs:b(t).run_data.runs},null,8,["runs"]),ll,nl,i(gr,{runs:b(t).run_data.runs},null,8,["runs"]),il,ol],64)):(o(),x("h5",dl,"No run data for this selected season"))]}),_:1},8,["periode","runs","data"])):F("",!0)]))}});const et=e=>(ie("data-v-56e97394"),e=e(),oe(),e),ul={id:"LookupMain",class:"HeaderFont"},_l={class:"flex full-width justify-end"},fl=et(()=>a("br",null,null,-1)),hl=et(()=>a("br",null,null,-1)),vl={key:0,class:"flex full-width justify-center"},ml=ne({__name:"player",setup(e){const l=E(null),t=Qe(),h=O(()=>t.currentRoute.value.params.region),s=O(()=>t.currentRoute.value.params.realm),r=O(()=>t.currentRoute.value.params.name);return(n,f)=>{var d,A;return o(),x("div",ul,[a("div",_l,[i(bt,{id:"PeriodeSelectorcomp",region:b(h),modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=y=>l.value=y)},null,8,["region","modelValue"]),fl,hl]),i(Ct,{name:b(r),realm:b(s),region:b(h),season:(A=(d=l.value)==null?void 0:d.season)==null?void 0:A.id},{default:g(({characterData:y,loading:w,error:T})=>[w&&!T&&!y?(o(),x("div",vl,[i(Be,{size:"100px",color:"primary"})])):T?(o(),x(X,{key:1},[q("error:"+p(T),1)],64)):!w&&!T&&y?(o(),K(cl,{key:2,data:y,player:b(r),realm:b(s),region:b(h),periode:l.value},null,8,["data","player","realm","region","periode"])):F("",!0)]),_:1},8,["name","realm","region","season"])])}}});var Al=Z(ml,[["__scopeId","data-v-56e97394"]]);export{Al as default};
